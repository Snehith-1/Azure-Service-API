<form  [formGroup]="reactiveForm" #form="ngForm">

<div class="card shadow-sm">
   
  <div class="card-header bg-lightblue">
    <h3 class="card-title"><b>Make Payment</b></h3>
  </div>
  
      <div class="mt-6"> 
     
      
        <div class="d-flex flex-row fv-row flex-wrap">
          <div class="col-9 col-lg-3 col-md-3 col-sm-12">
                <div class="col-lg-9 col-12 col-md-11 col-sm-11 fv-row mt-5 ms-5"><span class="ms-0"><b>Mode Of Payment</b></span>
                  <span style="color:red"> *</span>
                  <select formControlName="payment_mode" style="width:80%;" class="form-select form-select-solid bg-white form-select-lg borderc-secondary custom-input select2" 
                  placeholder="--Select an option--" (change)="showTextBox($event)">
                     <option>--Select an option--</option>
                     <option value="Cash">Cash</option>
                     <option value="Cheque">Cheque</option>
                     <option value="NEFT">NEFT</option>
                     </select>
                     <div *ngIf="payment_mode.invalid && (payment_mode.dirty || payment_mode.touched)">
                      <div *ngIf="payment_mode.errors?.['required']">
                          <span style="color:red;">Mode Of Payment is Required</span>
                      </div>
                  </div>
                </div>
              </div>
              
              <div class="col-9 col-lg-3 col-md-3 col-sm-12">
                <div class="col-lg-9 col-12 col-md-11 col-sm-11 fv-row mt-5 ms-4"><span><b>Payment Date</b></span>
                  <span style="color:red"> *</span>
                      <input formControlName="payment_date" type="date" style="width:80%;" class="form-control form-control-lg form-control-solid  borderc-secondary custom-input mb-3 mb-lg-0 bg-white custom-input"
                    placeholder="Enter Date"  name="payment_date" required/>
                    <div *ngIf="payment_date.invalid && (payment_date.dirty || payment_date.touched)">
                      <div *ngIf="payment_date.errors?.['required']">
                          <span style="color:red;">&nbsp;&nbsp;Payment Date is Required</span>
                      </div>
                  </div>
                  </div>
                </div>
              </div>
             
              <div *ngIf="showInput">
              <div class="d-flex flex-row fv-row flex-wrap">
              <div class="col-9 col-lg-3 col-md-3 col-sm-12">
                <div class="col-lg-9 col-12 col-md-11 col-sm-11 fv-row mt-5 ms-5"><span class="ms-0"><b>Employee Bank</b></span>
                  <span style="color:red"> *</span>
                  <ng-select formControlName="bank_name" style="width:80%;" 
                  [items]="employeebanklist"  
                   bindLabel="bank_name" bindValue="bank_name" placeholder="Select an Option" >
                  </ng-select>
                  <div *ngIf="bank_name.invalid && (bank_name.dirty || bank_name.touched)">
                    <div *ngIf="bank_name.errors?.['required']">
                        <span style="color:red;">Employee Bank is Required</span>
                    </div>
                </div>
                </div>
              </div>
              
              
                    <div class="col-9 col-lg-3 col-md-3 col-sm-12">
                    <div class="col-lg-9 col-12 col-md-11 col-sm-11 fv-row mt-5 ms-5"><span class="ms-0"><b>Bank Name(Pay From)</b></span>
                      <span style="color:red"> *</span>
                      <ng-select formControlName="bank_name" style="width:80%;" 
                      [items]="employeebanklist"  
                       bindLabel="bank_name" bindValue="bank_name" placeholder="Select an Option" >
                      </ng-select>
                      <div *ngIf="bank_name.invalid && (bank_name.dirty || bank_name.touched)">
                        <div *ngIf="bank_name.errors?.['required']">
                            <span style="color:red;">Bank Name is Required</span>
                        </div>
                    </div>
                      </div>
                    </div>
                    
                    
                    <div class="col-9 col-lg-3 col-md-3 col-sm-12">
                    <div class="col-lg-9 col-12 col-md-11 col-sm-11 fv-row mt-5 ms-4"><span class="ms-1"><b>Bank Branch Name((Pay From)</b></span>
                      <span style="color:red"> *</span>
                          <input formControlName="branch_name" type="text" style="width:78%;" class="form-control form-control-lg form-control-solid  borderc-secondary custom-input mb-3 mb-lg-0 bg-white custom-input"
                        placeholder="Enter Branch Name"  name="branch_name"  required/>
                        <div *ngIf="branch_name.invalid && (branch_name.dirty || branch_name.touched)">
                          <div *ngIf="branch_name.errors?.['required']">
                              <span style="color:red;">Bank Branch Name is Required</span>
                          </div>
                      </div>
                      </div>
                    </div>
                
                    <div class="col-9 col-lg-3 col-md-3 col-sm-12">
                    <div class="col-lg-9 col-12 col-md-11 col-sm-11 fv-row mt-5 ms-4"><span class="ms-1"><b>Account Number(Pay From)</b></span>
                      <span style="color:red"> *</span>
                          <input formControlName="acct_number" type="text" style="width:78%;" class="form-control form-control-lg form-control-solid  borderc-secondary custom-input mb-3 mb-lg-0 bg-white custom-input"
                        placeholder="Enter Account Number"  name="acct_number"  required/>
                        <div *ngIf="acct_number.invalid && (acct_number.dirty || acct_number.touched)">
                          <div *ngIf="acct_number.errors?.['required']">
                              <span style="color:red;">Account Number is Required</span>
                          </div>
                      </div>
                      </div>
                    </div>
    
                    <div class="col-9 col-lg-3 col-md-3 col-sm-12">
                        <div class="col-lg-9 col-12 col-md-11 col-sm-11 fv-row mt-5 ms-5"><span class="ms-1"><b>Cheque Number (Pay From)</b></span>
                        <input formControlName="cheq_number" type="text" style="width:80%;" class="form-control form-control-lg form-control-solid  borderc-secondary custom-input mb-3 mb-lg-0 bg-white custom-input"
                            placeholder="Enter Cheque Number"  name="cheq_number" />
                          </div>
                        </div>
                      </div>
                      </div>


                      <div *ngIf="showInput1">
                        <div class="d-flex flex-row fv-row flex-wrap">
                        <div class="col-9 col-lg-3 col-md-3 col-sm-12">
                          <div class="col-lg-9 col-12 col-md-11 col-sm-11 fv-row mt-5 ms-5"><span class="ms-0"><b>Employee Bank</b></span>
                            <span style="color:red"> *</span>
                            <ng-select formControlName="bank_name" style="width:80%;" 
                            [items]="employeebanklist"  
                             bindLabel="bank_name" bindValue="bank_name" placeholder="Select an Option" >
                            </ng-select>
                          </div>
                        </div>
                        
                        
                              <div class="col-9 col-lg-3 col-md-3 col-sm-12">
                              <div class="col-lg-9 col-12 col-md-11 col-sm-11 fv-row mt-5 ms-5"><span class="ms-0"><b>Bank Name(Pay From)</b></span>
                                <span style="color:red"> *</span>
                                <ng-select formControlName="bank_name" style="width:80%;" 
                                [items]="employeebanklist"  
                                 bindLabel="bank_name" bindValue="bank_name" placeholder="Select an Option" >
                                </ng-select>
                                </div>
                              </div>
                              
                              
                              <div class="col-9 col-lg-3 col-md-3 col-sm-12">
                              <div class="col-lg-9 col-12 col-md-11 col-sm-11 fv-row mt-5 ms-4"><span class="ms-1"><b>Bank Branch Name((Pay From)</b></span>
                                <span style="color:red"> *</span>
                                    <input formControlName="branch_name" type="text" style="width:78%;" class="form-control form-control-lg form-control-solid  borderc-secondary custom-input mb-3 mb-lg-0 bg-white custom-input"
                                  placeholder="Enter Branch Name"  name="branch_name"  required/>
                                </div>
                              </div>
                          
                              <div class="col-9 col-lg-3 col-md-3 col-sm-12">
                              <div class="col-lg-9 col-12 col-md-11 col-sm-11 fv-row mt-5 ms-4"><span class="ms-1"><b>Account Number(Pay From)</b></span>
                                <span style="color:red"> *</span>
                                    <input formControlName="acct_number" type="text" style="width:78%;" class="form-control form-control-lg form-control-solid  borderc-secondary custom-input mb-3 mb-lg-0 bg-white custom-input"
                                  placeholder="Enter Account Number"  name="acct_number"  required/>
                                </div>
                              </div>
              
                              <div class="col-9 col-lg-3 col-md-3 col-sm-12">
                                  <div class="col-lg-9 col-12 col-md-11 col-sm-11 fv-row mt-5 ms-5"><span class="ms-1"><b>Cheque Number (Pay From)</b></span>
                                  <input formControlName="cheq_number" type="text" style="width:80%;" class="form-control form-control-lg form-control-solid  borderc-secondary custom-input mb-3 mb-lg-0 bg-white custom-input"
                                      placeholder="Enter Cheque Number"  name="cheq_number" />
                                    </div>
                                  </div>
                                </div>
                                </div>
                     
                     
                     
                     <br><br>
                 
                    </div>

                    <div class="card shadow-sm mt-5">
                      <div class="align">
                          <div class="col-12 col-lg-4 col-md-6 col-sm-12">
                            <div class="d-flex align-items-center">
                              <span class="font-bold" style="margin-left: 10px;"><b>Month</b></span>
                             <b> <p class="mt-3" style="color: rgb(11, 69, 241);margin-left: 15px;">{{this.month}}</p></b>
                             <span class="font-bold" style="margin-left: 100px;"><b>Year</b></span>
                             <b> <p class="mt-3" style="color: rgb(11, 69, 241);margin-left: 15px;">{{this.year}}</p></b>
                            </div>
                          
                          </div>
                          </div>
                          </div>
                     
                    <div class="card-header bg-lightblue">
                        <h3 class="card-title"><b>Make Payment For Month</b></h3>
                      </div>


                      <div class="table-responsive">
                        <div class="card card-body m-1 shadow-lg p-3 mb-5 bg-white rounded">
                        <table id="makepayment_list" class="table table-striped table-row-bordered gy-5 gs-7">
                              <thead>
                                <tr class="fw-bolder fs-5 text-nowrap bg-lightblue text-blue align-middle">
                                  <th>
                                    <input type="checkbox" id="checkAll" (change)="$event ? masterToggle() : null"
                                        [checked]="selection.hasValue() && isAllSelected()"
                                        [indeterminate]="selection.hasValue() && !isAllSelected()" />
                                    Check All
                                </th>
                                  <th style="font-size:11px;">S.No</th>
                                  <th style="font-size:11px;">Branch</th>
                                  <th style="font-size:11px;">Employee Code</th>
                                  <th style="font-size:11px;">Employee Name</th>
                                  <th style="font-size:11px;">Department</th>
                                  <th style="font-size:11px;">Outstanding Payment</th>
                                  <th style="font-size:11px;">Month Payment</th>
                                  </tr>
                              </thead>
                              <tbody>
                                <tr *ngFor="let data of makepayment_list; let i=index;" >
                                  <td> <input type="checkbox" (click)="$event.stopPropagation()"
                                    (change)="$event ? selection.toggle(data) : null"
                                    [checked]="selection.isSelected(data)" /></td>
                                  <td style="font-size:11px;">{{i+1}}</td>
                                  <td style="font-size:11px;">{{data.branch_name}}</td>
                                  <td style="font-size:11px;">{{data.user_code}}</td>
                                  <td style="font-size:11px;">{{data.employee_name}}</td>
                                  <td style="font-size:11px;">{{data.department_name}}</td>
                                  <td style="font-size:11px; text-align: center;">{{data.outstanding_amount}}</td>
                                    <td>  
                                    <input type="text" [(ngModel)]="data.earned_net_salary" 
                                    class="form-control form-control-lg form-control-solid custom-input mb-3 mb-lg-0 border-secondary bg-white custom-input"
                                    formControlName="earned_net_salary_{{i}}"  placeholder="0.00"  
                                    style="width: 100px; display: inline-block; text-align: right;" />
                                                       
                                  </td>
                                  </tr>
                                </tbody>
                                </table>
                                </div>
                                </div>
<br><br>
                                  <!-- Modal footer -->
           <div class="text-center my-4">
            <button (click)="submit()" class="btn-success btn-sm text-white me-4">
              <i class="bi bi-check-square fs-5"></i>
                  <span class="ms-3">Submit</span>
            </button>
            <button class="btn-danger btn-sm text-white me-4" (click)="onback()">
              <i class="fa fa-arrow-left"></i>
              <span class="ms-3">Back</span>
            </button>
          </div>

          </div>
         

        </form>

         
  
                        