<div class="card shadow-sm">
    <div class="row ms-3 mt-3 d-flex align-items-center">
      <div class="col">
        <h3 class="card-title mt-10" style="font-size:15px;">Payment Report Summary</h3> 
      </div>
      <form  [formGroup]="reactiveForm" #form="ngForm">

        <div class="d-flex flex-row fv-row flex-wrap" >
            <div class="col-12 col-lg-3 col-md-3 col-sm-12">
              <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row mt-5 ms-5"><span class="font-bold">From</span>
                <input type="text" class="form-control form-control-lg form-control-solid borderc-secondary date-picker mb-3 mb-lg-0 bg-white custom-input" placeholder="DD-MM-YYYY" formControlName="from"/>
              </div>
            </div>
            <div class="col-12 col-lg-3 col-md-3 col-sm-12">
              <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row mt-5 ms-5"><span class="font-bold">To</span>
                <input type="text" class="form-control form-control-lg form-control-solid borderc-secondary date-picker mb-3 mb-lg-0 bg-white custom-input" placeholder="DD-MM-YYYY" formControlName="to"/>

              </div>
            </div>  
            <div class="col-12 col-lg-3 col-md-3 col-sm-12">
                <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row mt-5 ms-5"><span class="font-bold">Branch</span>
                  <ng-select formControlName="branch_name" style="width:80%;" 
                [items]="branchlist"  
                 bindLabel="branch_name" bindValue="branch_gid" placeholder="Select an Option">
                </ng-select>
                </div>
              </div>

    
              <div class="col-12 col-lg-2 col-md-2 col-sm-12 ">
                
                <button type="button" title="Search"  
                class="btn-primary btn-sm text-white me-4 mb-2 mt-12 float-end" (click)="GetPaymentSummary()">
                  <i class="fas fa-search me-2"></i> Search</button>
              </div>  
              <div class="col-12 col-lg-1 col-md-1 col-sm-12  mt-12 ">
                <button  title="Export Excel" 
                type="button" (click)="exportExcel()"
                class="btn btn-icon btn-sm bg-success mr-05 ">
                <i class="fas fa-file-excel"></i>
                </button>
  
                <button  title="Export Pdf" 
                type="button" (click)="pdf()"
                class="btn btn-icon btn-sm bg-danger ml-5">
                <i class="fa-solid fa-file-pdf"></i>
                </button>
              </div>           
              </div>
            </form>
            <div class="card m-3 border">
              <div class="card-header bg-lightblue card-height55">
                <div class="card-title m-0">
                  <h4 class="fw-bolder text-blue">Payment Transaction</h4>
                </div>
              </div>
            </div>         
          
          <div style="justify-content: end;">
             
         </div>
          <!-- <button kendo-button (click)="pdf()">
            Save As PDF...
          </button> -->
<!-- 
         // <button (click)="printPage()">Print</button> -->
              <div class="table-responsive">
                <div class="card card-body m-1 shadow-lg p-3 mb-5 bg-white rounded">
                  <table id="paymentreport_list" class="table table-striped table-row-bordered gy-5 gs-7">
                    <thead>
                      <tr class="fw-bolder fs-5 text-nowrap bg-lightblue text-blue align-middle"> 
                        <th></th>             
                        <th>S.No</th>
                        <th>Year</th>
                        <th>Month</th>            
                        <th>Employee Count</th>
                        <th>Amount</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let data of paymentreport_list; let i=index;">
                        <td (click)="ondetail(data.month,data.year)" (click)="data.isExpand = !data.isExpand">
                            <i *ngIf="!data.isExpand" class="bi-chevron-right"></i>
                            <i *ngIf="data.isExpand" class="bi-chevron-up"></i>
                        </td>
                      <td>{{i+1}}</td>
                      <td>{{data.year}}</td>
                      <td>{{data.month}}</td>            
                      <td>{{data.Employee_count}}</td>
                      <td>{{data.Amount}}</td>
                      <td *ngIf="data.isExpand" >
                        <br> <br> <br>
                        <div class="table-responsive" style="margin-left:-1000px;">
                            <div class="card card-body m-3 shadow-lg p-3 mb-5 bg-white rounded">
                                <table id="Reportpayment_list" 
                                    class="table table-striped table-row-bordered gy-5 gs-7 ">
                                    <thead>
                                        <tr class="fw-bold fs-5 text-nowrap bg-lightblue text-blue">
                                            <th>S.No</th>
                                            <th>Department</th>
                                            <th>Employee Code</th>
                                            <th>Employee Name</th>
                                            <th>Designation</th>
                                            <th>Amount</th>
                                            </tr>
                                    </thead>
                                    <tbody>
                                    <tr *ngFor="let data1 of Reportpayment_list; let i=index;">
                                            <td>{{i+1}}</td>
                                            <td>{{data1.department_name}}</td>
                                            <td>{{data1.user_code}}</td>                                           
                                            <td>{{data1.employee_name}}</td>
                                            <td>{{data1.designation_name}}</td>
                                            <td>{{data1.net_salary}}</td>
                                        </tr> 
                                 </tbody>
                                </table>
                            </div>
                        </div>
                    </td>     
                    </tr>
                     </tbody>
                     </table>
                     <div style="display: flex; justify-content:right; margin-top: 10px; margin-bottom: 10px; margin-right: 290px;">
                      <div>
                          <span style="font-size: 13px; margin-right:40px;"><span class="font-bold">Total Amount</span></span>               
                          <span style="font-size: 13px;  ">{{ this.overall }}</span>
                        </div>
                  </div>
                  

                  
                       
              