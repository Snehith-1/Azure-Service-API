<!-- begin::Add Invoice -->
<div class="card m-3">
    <!-- begin::Heading -->
    <div class="card-header bg-lightblue card-height55">
        <div class="card-title m-0">
            <h5 class="fw-bolder text-blue">ACCOUNTING INVOICE ADD CONFIRM</h5>
        </div>
    </div>
    <!-- end::Heading -->

    <!-- begin:: Invoice Add Form-->
    <form [formGroup]="addinvoiceform">
        <div class="d-flex flex-row flex-wrap mt-6 ms-4">
            <div class="col-12 col-lg-3 col-md-3 col-sm-12"><b>Invoice Number<span class="ms-1 text-red">*</span></b>
                <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row mt-2">
                    <input type="text" style="height:38px"
                        class="form-control form-control-lg form-control-solid  mb-3 mb-lg-0 borderc-secondary bg-white custom-input"
                        placeholder="Invoice number" readonly formControlName="invoice_refno" class="form-control" />
                </div>
            </div>

            <div class="col-12 col-lg-3 col-md-3 col-sm-12"><b>Invoice Reference No</b>
                <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row mt-2">
                    <input type="text" style="height:38px"
                        class="form-control form-control-lg form-control-solid custom-input mb-3 mb-lg-0 borderc-secondary bg-white custom-input"
                        placeholder="Invoice ref no." readonly formControlName="invoice_gid" class="form-control" />
                </div>
            </div>


            <div class="col-12 col-lg-2 col-md-2 col-sm-12"><b>Invoice Date</b>
                <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row mt-2">
                    <input type="date"
                        class="form-control form-control-lg form-control-solid date-picker mb-3 mb-lg-0 borderc-secondary bg-white custom-input"
                        placeholder="DD-MM-YYYY" formControlName="invoice_date" />
                </div>
            </div>

            <div class="col-12 col-lg-4 col-md-6 fv-row col-sm-12">
                <div class="row">
                    <div class="col-6">
                        <b>Payment Term<span class="ms-1 text-red" style="height:38px">*</span></b>
                        <div class="col-12">
                            <select
                                class="form-select form-select-solid bg-white form-select-lg borderc-secondary custom-input select2 mt-2"
                                formControlName="payment_term">
                                <option disabled selected>Select Days</option>
                                <option value="0" selected>0 Days</option>
                                <option value="7" selected>7 Days</option>
                                <option value="15" selected>15 Days</option>
                                <option value="30" selected>30 Days</option>
                                <option value="45" selected>45 Days</option>
                                <option value="60" selected>60 Days</option>
                                <option value="90" selected>90 Days</option>
                                <option value="120" selected>120 Days</option>
                            </select>
                        </div>
                    </div>
                    <div class="col-6">
                        <b>Date</b>
                        <div class="col-10 mt-2">
                            <input type="date"
                                class="form-control form-control-lg form-control-solid date-picker mb-3 mb-lg-0 borderc-secondary bg-white custom-input"
                                placeholder="DD-MM-YYYY" formControlName="payment_date" />
                        </div>
                    </div>
                </div>
            </div>
        </div>


        <div class="d-flex flex-row flex-wrap mt-6 ms-4">

            <div class="col-12 col-lg-3 col-md-3 col-sm-12"><b>Branch</b>
                <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row mt-2">
                    <input type="text" style="height:38px;"
                        class="form-control form-control-lg form-control-solid custom-input mb-3 mb-lg-0 borderc-secondary bg-white custom-input"
                        placeholder="Branch" readonly formControlName="branch_name" class="form-control" />
                </div>
            </div>

            <div class="col-12 col-lg-3 col-md-3 col-sm-12">
                <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row">
                    <div class="d-flex flex-row flex-wrap">
                        <div class="col-12 col-lg-7 col-md-7 col-sm-12"><b>SO Ref No</b>
                            <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row mt-2">
                                <input type="text"
                                    class="form-control form-control-lg form-control-solid mb-3 mb-lg-0 custom-input border-secondary"
                                    formControlName="serviceorder_gid" readonly>
                            </div>
                        </div>
                        <div class="col-12 col-lg-5 col-md-5 col-sm-12"><b>SO Date</b>
                            <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row mt-2">
                                <input type="text"
                                    class="form-control form-control-lg form-control-solid mb-3 mb-lg-0 custom-input border-secondary"
                                    formControlName="serviceorder_date" readonly>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-12 col-lg-3 col-md-3 col-sm-12"><b>Company Name</b>
                <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row mt-2">
                    <input type="text" placeholder="Company name" style="height:38px;"
                        class="form-control form-control-lg form-control-solid custom-input mb-3 mb-lg-0 borderc-secondary bg-white custom-input"
                        [readOnly]="true" formControlName="vendor_companyname" class="form-control" />
                </div>
            </div>

            <div class="col-12 col-lg-3 col-md-3 col-sm-12"><b>Contact Person Name</b>
                <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row mt-2">
                    <input type="text" style="height:38px;"
                        class="form-control form-control-lg form-control-solid custom-input mb-3 mb-lg-0 borderc-secondary bg-white custom-input text-red"
                        placeholder="Contact person name" readonly formControlName="contactperson_name"
                        class="form-control" />
                </div>
            </div>
        </div>


        <div class="d-flex flex-row flex-wrap mt-6 ms-4">

            <div class="col-12 col-lg-3 col-md-3 col-sm-12"><b>Email Address</b>
                <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row mt-2">
                    <input type="text" style="height:38px;"
                        class="form-control form-control-lg form-control-solid custom-input mb-3 mb-lg-0 borderc-secondary  bg-white custom-input"
                        placeholder="Email Address" readonly formControlName="email_id" class="form-control" />
                </div>
            </div>

            <div class="col-12 col-lg-3 col-md-3 col-sm-12">
                <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row">
                    <div class="d-flex flex-row flex-wrap">
                        <div class="col-12 col-lg-7 col-md-7 col-sm-12"><b>Currency</b>
                            <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row mt-2">
                                <input type="text" class="form-control form-control-lg form-control-solid mb-3 mb-lg-0 border-secondary custom-input text-red" formControlName="currency_code" readonly>
                            </div>
                        </div>
                        <div class="col-12 col-lg-5 col-md-5 col-sm-12"><b>Exchange Rate</b>
                            <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row mt-2">
                                <input type="text" class="form-control form-control-lg form-control-solid mb-3 mb-lg-0 border-secondary custom-input text-red" formControlName="exchange_rate" readonly>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-12 col-lg-3 col-md-3 col-sm-12"><b>Purchase Type<span class="ms-1 text-red" style="height:38px;">*</span></b>
                
                    <ng-select
                        class="form-select form-control-lg bg-white form-select-lg borderc-secondary custom-input select2"
                        formControlName="purchasetype_name" [items]="purchasetype_list" required
                        class="custom col-lg-11 col-12 col-md-11 col-sm-11 fv-row mt-2" bindLabel="purchasetype_name"
                        bindValue="purchasetype_name" placeholder="Select an option"></ng-select>
                
            </div>

            <div class="col-12 col-lg-3 col-md-3 col-sm-12"><b>Remarks</b>
                <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row mt-2">
                    <textarea type="text"
                        class="form-control form-control-lg form-control-solid custom-input mb-3 mb-lg-0  borderc-secondary bg-white custom-input"
                        placeholder="Remarks" formControlName="invoice_remarks" class="form-control"
                        style="text-align: left;"></textarea>
                </div>
            </div>
        </div>

        <!-- end:: Invoice Add Form -->

        <!--Start:: Summary starts -->
        <div class="card card-body m-3 shadow-lg p-3 mb-5 bg-white table-responsive rounded">
            <table class="table table-striped table-row-bordered gy-5 gs-7 ">
                <thead>
                    <tr class="fw-bold fs-5 text-nowrap bg-lightblue text-blue">
                        <th>S.No</th>
                        <th>Product</th>
                        <th>Description</th>
                        <th>Quantity</th>
                        <th>Unit Price</th>
                        <th>Discount<br> Amount</th>
                        <th>SO <br>Amount</th>
                        <th class="text-center">Invoice Amount</th>
                        <th class="text-center">Tax</th>
                        <th class="text-center">Total Amount</th>
                    </tr>
                </thead>

                <tbody>
                    <!--Product Name product_name-->
                    <tr *ngFor="let data of invoiceaddcomfirm_list; let i=index;" class="d-flex-wrap">
                        <td class="align-middle">{{i+1}}</td>
                        <td class="align-middle">{{data.product_name}}</td>
                        <td><textarea
                                class="form-control form-control form-control-solid custom-input mb-3 mb-0 borderc-secondary bg-white custom-input mt-7">{{data.description}}</textarea>
                        </td>
                        <td class="align-middle">{{data.quantity}}</td>
                        <td class="align-middle">{{data.unit_price}}</td>
                        <td class="align-middle">{{data.discount_amount}}</td>
                        <td>{{data.total_amount}}</td> <!--SO Amount-->

                        <!-- <Invoice Amount> -->
                        <td>
                            <label>
                                <input style="width: 120px; height: 40px" formControlName="invoice_amount"
                                    [(ngModel)]="invoice_amount" (input)="prodtotalcal()"
                                    class="form-control form-control form-control-solid custom-input   borderc-secondary bg-white custom-input mt-7">
                            </label>
                        </td>

                        <!--tax-->
                        <td>

                            <div>
                                <div class="container">
                                    <div class="row">
                                        <div class="col">
                                            <div class="col-lg-12 col-md-12 col-sm-12"><b>Tax 1</b>
                                                <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row mt-2">
                                                    <select
                                                        class="form-select form-select-solid bg-white form-select-lg borderc-secondary custom-input select2"
                                                        formControlName="taxname1" (change)="taxAmount1()">
                                                        <option value="" disabled selected>Select Tax</option>
                                                        <option *ngFor="let taxname of tax_list"
                                                            [value]="taxname.tax_gid">{{taxname.tax_name}}</option>
                                                    </select>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col">
                                            <div class="col-lg-12 col-md-12 col-sm-12">
                                                <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row mt-8">
                                                    <input type="text" class="form-control" placeholder="0.00" readonly
                                                        style="text-align: right; height: 38px; background-color: #e9e7e7;"
                                                        formControlName="taxamount1" [(ngModel)]="taxamount1"
                                                        input="taxAmount1()">
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div>
                                <div class="container">
                                    <div class="row">
                                        <div class="col">
                                            <div class="col-lg-12 col-md-12 col-sm-12 mt-4"><b>Tax 2</b>
                                                <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row mt-2">
                                                    <select
                                                        class="form-select form-select-solid bg-white form-select-lg borderc-secondary custom-input select2"
                                                        formControlName="taxname2" (change)="taxAmount2()">
                                                        <option value="" disabled selected>Select Tax</option>
                                                        <option *ngFor="let taxname of tax_list"
                                                            [value]="taxname.tax_gid">{{taxname.tax_name}}</option>
                                                    </select>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col mt-4">
                                            <div class="col-lg-12 col-md-12 col-sm-12">
                                                <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row mt-8">
                                                    <input type="text" class="form-control" placeholder="0.00" readonly
                                                        style="text-align: right; height: 38px; background-color: #e9e7e7;"
                                                        formControlName="taxamount2" [(ngModel)]="taxamount2">
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                        </td>


                        <!--Total Amount-->

                        <td>
                            <label>
                                <input style="width: 120px; height: 40px" formControlName="product_total" readonly
                                    [(ngModel)]="product_total"
                                    class="form-control form-control form-control-solid custom-input borderc-secondary bg-white custom-input mt-7 ">
                            </label>
                        </td>

                    </tr>
                </tbody>
            </table>
            <!--Summary count starts-->


            <div class="card">

                <div class="d-flex justify-content-end mt-4">
                    <div class="col-md-4 bg-gray">
                        <label class="tbl_lab"> Net Amount:</label>
                        <input type="text" class="tbl_tot_in" readonly (input)="prodtotalcal()"
                            formControlName="product_total">
                        <span class="tbl_spn">INR</span>
                    </div>
                </div>


                <div class="d-flex justify-content-end mt-4">
                    <div class="col-md-4 bg-gray">
                        <label class="tbl_lab"> Overall Tax:</label>
                        <input type="text" class="tbl_tot_in" readonly>
                        <span class="tbl_spn">INR</span>
                    </div>
                </div>

                <div class="d-flex justify-content-end mt-4">
                    <div class="col-md-4 bg-gray">
                        <label class="tbl_lab"> Discount Amount:</label>
                        <input type="text" class="tbl_tot_in" formControlName="disc_amount" [(ngModel)]="disc_amount"
                            (input)="grandtotalcal()">
                        <span class="tbl_spn">INR</span>
                    </div>
                </div>

                <div class="d-flex justify-content-end mt-4">
                    <div class="col-md-4 bg-gray">
                        <label class="tbl_lab"> Addon Amount:</label>
                        <input type="text" class="tbl_tot_in" formControlName="addon_amount" [(ngModel)]="addon_amount"
                            (input)="grandtotalcal()">
                        <span class="tbl_spn">INR</span>
                    </div>
                </div>

                <div class="d-flex justify-content-end mt-4">
                    <div class="col-md-4 bg-gray">
                        <label class="tbl_lab"> Overall Total:</label>
                        <input type="text" class="tbl_tot_in" readonly>
                        <span class="tbl_spn">INR</span>
                    </div>
                </div>

                <div class="d-flex justify-content-end mt-4">
                    <div class="col-md-4 bg-gray">
                        <label class="tbl_lab"> SO Total:</label>
                        <input type="text" class="tbl_tot_in" readonly formControlName="outstanding_amount">
                        <span class="tbl_spn">INR</span>
                    </div>
                </div>

                <div class="d-flex justify-content-end mt-4">
                    <div class="col-md-4 bg-gray">
                        <label class="tbl_lab">Invoice Amount Already Paid:</label>
                        <input type="text" class="tbl_tot_in" readonly>
                        <span class="tbl_spn">INR</span>
                    </div>
                </div>

                <div class="d-flex justify-content-end mt-4">
                    <div class="col-md-4 bg-gray">
                        <label class="tbl_lab">Grand Total:</label>
                        <input type="text" class="tbl_tot_in" [(ngModel)]="grand_total" (input)="grandtotalcal()"
                            formControlName="grand_total">
                        <span class="tbl_spn">INR</span>
                    </div>
                </div>

            </div>

            <!--Summary count ends-->

            <div class="text-center my-4">
                <button class="btn-success btn-sm text-white me-4" (click)="pblinvoicesubmit()" data-bs-dismiss="modal">
                    <i class="fas fa-check text-white fs-5 "></i> &nbsp;Submit
                </button> &nbsp;&nbsp;
                <button class="btn-danger btn-sm text-white me-4" (click)="close()" data-bs-dismiss="modal">
                    <i class="fas fa-close text-white"></i> &nbsp;Close
                </button>
            </div>
        </div>

    </form>


    <!--Start:: Summary ends -->