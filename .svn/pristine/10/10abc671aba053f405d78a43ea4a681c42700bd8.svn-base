<div class="card shadow-sm">
    <div class="row ms-3 mt-3 d-flex align-items-center">
        <div class="card-header bg-lightblue">
            <h3 class="card-title"><b>Payment Report Summary</b></h3>
          </div>
      
      <form  [formGroup]="reactiveForm" #form="ngForm">

        <div class="d-flex flex-row fv-row flex-wrap" >
            <div class="col-12 col-lg-3 col-md-3 col-sm-12">
              <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row mt-5 ms-5"><b>From</b><span style="color:red"> *</span>
                <input formControlName="from" type="date" style="width:70%;" class="form-control form-control-lg form-control-solid  borderc-secondary custom-input mb-3 mb-lg-0 bg-white custom-input"
                placeholder="Enter Date"  name="from" required/>
              </div>
            </div>
            <div class="col-12 col-lg-3 col-md-3 col-sm-12">
              <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row mt-5 ms-5"><b>To</b><span style="color:red"> *</span>
                <input formControlName="to" type="date" style="width:70%;" class="form-control form-control-lg form-control-solid  borderc-secondary custom-input mb-3 mb-lg-0 bg-white custom-input"
                placeholder="Enter Date"  name="to" required/>
              </div>
            </div>  
            <div class="col-12 col-lg-3 col-md-3 col-sm-12">
                <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row mt-5 ms-5"><b>Branch</b><span style="color:red"> *</span>
                  <ng-select formControlName="branch_name" style="width:80%;" 
                [items]="branchlist"  
                 bindLabel="branch_name" bindValue="branch_gid" placeholder="Select an Option">
                </ng-select>
                </div>
              </div>

    
              <div class="col-12 col-lg-1 col-md-1 col-sm-12">
                <button type="button" title="Search" class="btn-primary btn-sm text-white me-4 mb-2 mt-12 float-end" (click)="GetPaymentSummary()">
                  <i class="fas fa-search me-2"></i> Search</button>
              </div>             
           
            </div>
            <br><br>
            </form>
            
            <div class="col">
                <h3 class="card-title" style="font-size:15px;">Payment Transaction</h3>
          
            </div>
            <button title="Export Excel" type="button" class=" btn-success btn-sm bg-export me-8" style="width: 3%;" (click)="exportExcel()">
              <i class="bi bi-file-earmark-arrow-up "></i>
          </button>

            
              <div class="table-responsive">
                <div class="card card-body m-1 shadow-lg p-3 mb-5 bg-white rounded">
                  <table id="paymentreport_list" class="table table-striped table-row-bordered gy-5 gs-7">
                    <thead>
                      <tr class="fw-bolder fs-5 text-nowrap bg-lightblue text-blue align-middle"> 
                        <th></th>             
                        <th style="font-size:11px;">S.No</th>
                        <th style="font-size:11px;">Year</th>
                        <th style="font-size:11px;">Month</th>            
                        <th style="font-size:11px;">Employee Count</th>
                        <th style="font-size:11px;">Amount</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let data of paymentreport_list; let i=index;">
                        <td (click)="ondetail(data.payment_month,data.payment_year)" (click)="data.isExpand = !data.isExpand">
                            <i *ngIf="!data.isExpand" class="bi-chevron-right"></i>
                            <i *ngIf="data.isExpand" class="bi-chevron-up"></i>
                        </td>
                      <td style="font-size:11px;">{{i+1}}</td>
                      <td style="font-size:11px;">{{data.year}}</td>
                      <td style="font-size:11px;">{{data.month}}</td>            
                      <td style="font-size:11px;">{{data.Employee_count}}</td>
                      <td style="font-size:11px;">{{data.Amount}}</td>
                      <td *ngIf="data.isExpand" >
                        <br> <br> <br>
                        <div class="table-responsive" style="margin-left:-1100px;">
                            <div class="card card-body m-3 shadow-lg p-3 mb-5 bg-white rounded">
                                <table id="Reportpayment_list" 
                                    class="table table-striped table-row-bordered gy-5 gs-7 ">
                                    <thead>
                                        <tr class="fw-bold fs-5 text-nowrap bg-lightblue text-blue">
                                            <th>S.No</th>
                                            <th>Department</th>
                                            <th>Employee Code</th>
                                            <th>Employee Name</th>
                                            <th>Designation</th>
                                            <th>Amount</th>
                                            </tr>
                                    </thead>
                                    <tbody>
                                    <tr *ngFor="let data1 of Reportpayment_list; let i=index;">
                                            <td>{{i+1}}</td>
                                            <td>{{data1.department_name}}</td>
                                            <td>{{data1.user_code}}</td>                                           
                                            <td>{{data1.employee_name}}</td>
                                            <td>{{data1.designation_name}}</td>
                                            <td>{{data1.net_salary}}</td>
                                        </tr> 
                                 </tbody>
                                </table>
                            </div>
                        </div>
                    </td>     
                    </tr>
                     </tbody>
                     </table>
                     <div style="display: flex; justify-content:right; margin-top: 10px; margin-bottom: 10px; margin-right: 290px;">
                      <div>
                          <span style="font-size: 13px; margin-right:40px;"><b>Total Amount</b></span>               
                          <span style="font-size: 13px;  ">{{ this.overall }}</span>
                        </div>
                  </div>
                  

                  
                       
              