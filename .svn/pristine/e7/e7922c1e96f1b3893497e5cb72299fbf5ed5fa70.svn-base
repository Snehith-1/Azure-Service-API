<div class="card rounded-top">
    <div class="card-title p-5 pb-6 pt-6 rounded-top bg-primary">
      <h3 class="fw-bolder text-white"><i class="fas fa-plus fw-bolder fs-3"></i> &nbsp;&nbsp;&nbsp; Edit Customer Enquiry
      </h3>
    </div>
        <form [formGroup]="cuseditform" #form="ngForm" >
            <div class="m-4 mt-4 border card">
            <div class="d-flex flex-row m-6 flex-wrap">

                <div class="col-12 col-lg-4 col-md-6 col-sm-12"> <span class="font-bold">Enquiry Ref. No</span>
                    <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row mt-2">
                        <input type="text" class="
                form-control form-control-lg form-control-solid custom-input
                mb-3 mb-lg-0  borderc-secondary bg-white custom-input" placeholder="New Reference No"
                            formControlName="enquiry_gid" class="form-control" readonly style="height:40px;" />
                    </div>
                </div>
         
                <div class="col-12 col-lg-4 col-md-6 col-sm-12"> <span class="font-bold required">Enquiry Date</span> 
                    <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row mt-2">
                        <input type="date"   pattern="^(?!\s*$).+" [ngStyle]="{ 'border-color': cuseditform.get('enquiry_date')?.hasError('required') && cuseditform.get('enquiry_date')?.touched ? 'red' : 'rgb(209, 209, 209)' , 'height': '42px'}"
                        formControlName="enquiry_date" 
                   class="form-control form-control-lg form-control-solid date-picker 
                   custom-input mb-3 mb-lg-0 bg-white custom-input date-picker mt-2" 
                   placeholder="DD-MM-YYYY"/>
                    </div>                    
                </div>
                <div class="col-12 col-lg-4 col-md-6 col-sm-12"><span class="font-bold required mt-2 m-2">Branch</span>
                    <div class="col-lg-12 col-12 col-md-11 col-sm-11 fv-row mt-2">
                        <ng-select formControlName="branch_name" [(ngModel)]="mdlBranch"    [items]="branch_list" required class="custom col-lg-11 col-12 col-md-11 col-sm-11 fv-row mt-2"
                          bindLabel="branch_name" bindValue="branch_name" placeholder="Select an option"></ng-select>
                    </div>                    
                </div>
            </div>

                <div class="d-flex flex-row m-6 flex-wrap">
                    <div class="col-12 col-lg-4 col-md-6 col-sm-12"><span class="font-bold">Customer Enquiry Ref. No</span> 
                        <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row mt-2">
                            <input type="text" class="
                            form-control form-control-lg form-control-solid custom-input
                            mb-3 mb-lg-0  borderc-secondary bg-white custom-input"
                            formControlName="enquiry_referencenumber" class="form-control" style="height:40px;"/>
                        </div>                    
                    </div>
                    

                    <div class="col-12 col-lg-4 col-md-6 col-sm-12"><span class="font-bold required">Customer Name</span> 
                        <div class="col-lg-12 col-12 col-md-11 col-sm-11 fv-row mt-2">
                            <ng-select formControlName="customer_name"    [items]="customer_list" required class="custom col-lg-11 col-12 col-md-11 col-sm-11 fv-row mt-2"
                              bindLabel="customer_name" bindValue="customer_name" placeholder="Select an option"
                              (change)="GetOnChangeCustomerName() "></ng-select>
                        </div>                    
                    </div>
                    <div class="col-12 col-lg-4 col-md-6 col-sm-12"> <span class="font-bold required">Contact Person</span> 
                        <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row mt-2">
                            <input type="text" class="
                            form-control form-control-lg form-control-solid custom-input
                            mb-3 mb-lg-0  borderc-secondary bg-white custom-input"
                            formControlName="contact_person" class="form-control" style="height:40px;"/>
                        </div>                    
                    </div>

                   
            </div>

            <div class="d-flex flex-row m-6 flex-wrap">
                
                <div class="col-12 col-lg-4 col-md-6 col-sm-12"><span class="font-bold">Contact Number</span> 
                    <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row mt-2">
                        <input type="text" class="
                        form-control form-control-lg form-control-solid custom-input
                        mb-3 mb-lg-0  borderc-secondary bg-white custom-input"
                        formControlName="contact_number" class="form-control" style="height:40px;"/>
                    </div>                    
                </div>
                <div class="col-12 col-lg-4 col-md-6 col-sm-12"> <span class="font-bold">Email ID</span>
                    <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row mt-2">
                        <input type="text" class="
                        form-control form-control-lg form-control-solid custom-input
                        mb-3 mb-lg-0  borderc-secondary bg-white custom-input"
                        formControlName="contact_email" class="form-control" style="height:40px;"/>
                    </div>                    
                </div>
                <div class="col-12 col-lg-4 col-md-6 col-sm-12"><span class="font-bold ">Address</span>
                    <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row mt-2">
                        <textarea type="text" class="
                form-control form-control-lg form-control-solid custom-input
                mb-3 mb-lg-0  borderc-secondary bg-white custom-input" formControlName="contact_address"
                            class="form-control" rows="3" ></textarea>
                    </div>
                </div>
                
                
            

                
        
            </div>
            
            <div class="d-flex flex-row m-6 flex-wrap">
                <div class="col-12 col-lg-4 col-md-6 col-sm-12"> <span class="font-bold">Enquiry Assigned To</span> 
                    <div class="col-lg-12 col-12 col-md-11 col-sm-11 fv-row mt-2">
                        <ng-select formControlName="assign_to" [items]="assign_list" required class="custom col-lg-11 col-12 col-md-11 col-sm-11 fv-row mt-2"
                          bindLabel="user_firstname" bindValue="user_firstname" placeholder="Select an option"></ng-select>
                    </div>                    
                </div>
                <div class="col-12 col-lg-4 col-md-6 col-sm-12"><span class="font-bold ">Enquiry Remarks</span>
                    <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row mt-2">
                        <textarea type="text" class="
                form-control form-control-lg form-control-solid custom-input
                mb-3 mb-lg-0  borderc-secondary bg-white custom-input" formControlName="enquiry_remarks"
                placeholder="Enter Enquiry Remarks" class="form-control" rows="3" ></textarea>
                    </div>
                </div>
                
                <div class="col-12 col-lg-4 col-md-6 col-sm-12"><span class="font-bold">Customer Requirment</span>
                    <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row mt-2">
                        <textarea type="text" class="
                form-control form-control-lg form-control-solid custom-input
                mb-3 mb-lg-0  borderc-secondary bg-white custom-input" formControlName="customer_requirement"
                placeholder="Enter Cusotmer Requirment"  class="form-control" rows="3" ></textarea>
                    </div>
                </div>
            </div>

            <div class="d-flex flex-row m-6 flex-wrap">
                <div class="col-12 col-lg-4 col-md-6 col-sm-12"><span class="font-bold ">Landmark</span>
                    <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row mt-2">
                        <textarea type="text" class="
                form-control form-control-lg form-control-solid custom-input
                mb-3 mb-lg-0  borderc-secondary bg-white custom-input" formControlName="landmark"
                placeholder="Enter Customer Landmark" class="form-control" rows="3" ></textarea>
                    </div>
                </div>

                <div class="col-12 col-lg-4 col-md-6 col-sm-12"><span class="font-bold mt-2 m-2">Expected Closure Date</span>
                    <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row mt-2">
                        <input type="date"   pattern="^(?!\s*$).+" [ngStyle]="{ 'border-color': cuseditform.get('enquiry_date')?.hasError('required') && cuseditform.get('enquiry_date')?.touched ? 'red' : 'rgb(209, 209, 209)' , 'height': '42px'}"
                        formControlName="closure_date" 
                   class="form-control form-control-lg form-control-solid date-picker 
                   custom-input mb-3 mb-lg-0 bg-white custom-input date-picker mt-2" 
                   placeholder="DD-MM-YYYY" />
                    </div>                    
                </div>
            </div>

 <!--product summary-->
 <div class="card rounded-top">

    <div class="card-header bg-lightblue card-height55 rounded-top" style="border-radius: 0px;">
      <div class="card-title m-0">
        <h5 class="fw-bolder text-blue">Product Summary</h5>
      </div>
    </div>
 <div class="table-responsive">
    <form [formGroup]="productform" (ngSubmit)="productSubmit()">
            <table id="products_list" class="table table-striped table-row-bordered gy-5 gs-7 ">
                <thead>
                    <tr class="font-bold fs-6 text-nowrap text-black">
                        <th class="required">Product</th>
                        <th>Product Code</th>
                        <th>Product Group</th>
                        <th>Unit</th>
                        <th>Qty Requested</th>
                        <th>Potential value</th>
                        <th>Need By Date</th>
                        <th class="align-center">Action</th>
                    </tr>
                </thead>
                <tbody>

                    <tr>
                         <!--Product Dropdown-->
                        <td>
                            <div class="container">
                                <div class="row">
                                    <div class="col-lg-12 col-12 col-md-11 col-sm-11 fv-row ">
                                        <ng-select formControlName="product_name" [items]="products_list1"
                                            required
                                            class="custom col-lg-11 col-12 col-md-11 col-sm-11 fv-row mt-2 "
                                            bindLabel="product_name" placeholder="Select an option"
                                            (change)="GetOnChangeProductsName()"
                                            [(ngModel)]="mdlproduct"></ng-select>
                                    </div>
                                </div>
                            </div>
                        </td>
                        <!--Product code -->
    
                        <td>
                            <div class="col-lg-12 col-12 col-md-11 col-sm-11 fv-row mt-2">
                                <input type="text" class="form-control bg-secondary" formControlName="product_code"
                                    readonly  style="height:40px;">
                            </div>
                        </td>

                        <!--product group-->
                        <td>
                            <div class="col-lg-12 col-6 col-md-11 col-sm-11 fv-row mt-2">
                                <input type="text" class="form-control bg-secondary" formControlName="productgroup_name"
                                    readonly style="height:40px;">
                            </div>
                        </td>
                        <td>
                             <!--product unit-->
                            <div class="col-lg-12 col-12 col-md-11 col-sm-11 fv-row mt-2">
                                <input type="text" class="form-control bg-secondary" formControlName="productuom_name"
                                    readonly style="height:40px;">
                            </div>
                        </td>
                        <!--Requested Quantity-->
                        <td>
                            <div class="col-lg-12 col-12 col-md-11 col-sm-11 fv-row mt-2">
                                <input type="text" class="
                                  form-control form-control-lg form-control-solid custom-input
                                   mb-3 mb-lg-0  borderc-secondary bg-white custom-input"
                                   formControlName="qty_requested" class="form-control"  style="height:40px;"/>
                            </div>
                        </td>
                        <!--Potential Value-->
                        <td>
                            <div class="col-lg-12 col-12 col-md-11 col-sm-11 fv-row mt-2">
                                <input type="text" class="
form-control form-control-lg form-control-solid custom-input
mb-3 mb-lg-0  borderc-secondary bg-white custom-input" formControlName="potential_value"
                                    class="form-control" style="height:40px;" />
                            </div>
                        </td>
                        <!--Need by Date-->
                        <td>
                            <div class="container">
                                <div class="row">
                                    <div class="col-lg-12 col-12 col-md-11 col-sm-11 fv-row mt-2">
                                        <input type="date"   pattern="^(?!\s*$).+" [ngStyle]="{ 'border-color': cuseditform.get('product_requireddate')?.hasError('required')
                                        && cuseditform.get('product_requireddate')?.touched ? 'red' : 'rgb(209, 209, 209)' , 'height': '42px' ,'width': '120px'}"
                                       formControlName="product_requireddate" 
                                  class="form-control form-control-lg form-control-solid date-picker custom-input mb-3 mb-lg-0 bg-white 
                                  custom-input date-picker " placeholder="DD-MM-YYYY"/>
                                    </div>
                                </div>
                            </div>
                        </td>
                        <td class="text-center text-nowrap">
                            <button title="Add" type="button" class="btn btn-icon btn-sm bg-success  m-4 me-2"
                                (click)="productSubmit()">
                                <span Class="fa-solid fa-plus text-white  fs-6"></span></button>
                        </td>
                    </tr>
                </tbody>
            </table>

        <div class="modal" id="myModaldeletes" data-bs-backdrop="static" data-bs-keyboard="false">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="text-center my-4">
                        <h2><b>Are you sure?</b></h2>
                        <br>
                        <p style="display: block;">Do You Want To Delete the Record ?</p>
                        <div class="text-center my-4">
                            <button class="btn-primary btn-sm text-white me-2" data-bs-dismiss="modal">
                                <i class="fas fa-close text-white"></i> &nbsp;Close
                            </button>&nbsp;
                            <button class="btn-danger btn-sm text-white me-4" (click)="ondelete()"
                                data-bs-dismiss="modal">
                                <i class="fas fa-trash text-white fs-5 "></i> &nbsp;Delete
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    
    </form>
 </div>
 <div class="table-responsive">
    <div class="card card-body table-responsive m-3 p-3 mb-5 bg-white rounded">
      <table id="POproductlist" class="table table-striped table-row-bordered gy-5 gs-7 ">
        <thead>
          <tr class="fw-bold fs-5 text-nowrap bg-lightblue text-blue">
            <th>Product Group</th>
            <th>Product Code</th>
            <th>Product</th>
            <th>Unit</th>
            <th>Qty Requested</th>
            <th>Potential value</th>
            <th>Need By Date</th>
           
           
            <th class="text-center">Action</th>
          </tr>
        </thead>
        <tbody>
            <tr *ngFor="let data of POproductlist; ">
                <!--Product Group Dropdown-->
                <td>{{data.productgroup_name}}</td>
                <td>{{data.product_code}}</td>
                <td>{{data.product_name}}<br>{{data.display_field}}</td>
                <td>{{data.productuom_name}}</td>
                <td>{{data.qty_requested}}</td>
                <td>{{data.potential_value}}</td>
                <td>{{data.product_requireddate}}<br>{{data.product_requireddateremarks}}</td>
                <td class="text-center">
                    <button title="Delete" type="button"
                    (click)="openModaldelete(data.enquiry_gid,data.tmpsalesenquiry_gid)" data-bs-toggle="modal"
                    data-bs-target="#myModaldeletes"
                    class="btn btn-icon btn-sm bg-danger me-1"><span
                        class="fa-solid fa-trash text-white  fs-6"></span></button>&nbsp;
                    <button title="Edit" type="button" (click)="openModaledit(data.tmpsalesenquiry_gid)"
                        data-bs-toggle="modal" data-bs-target="#myModaledits"
                        class="btn btn-icon btn-sm bg-etdark me-1"><span
                            class="fa-solid fa-pencil text-white  fs-6"></span></button>

                </td>
            </tr>
        </tbody>
      </table>
    </div>
  </div>
  <div class="text-center my-4">
    <button type="submit" class="btn-success btn-sm text-white me-2" (click)="onSubmit()" >
        <i class="fas fa-check text-white fs-5"></i>
        <span class="ms-3" >Update</span> </button>

<button class="btn-primary btn-sm text-white me-4" (click)="onclose()">
            <i class="fas fa-arrow-left"></i> &nbsp; Back
          </button>
       
</div>
 </div>
</div>

 
 
        </form>
   
    </div>
    <div class="modal" id="myModaldelete" data-bs-backdrop="static" data-bs-keyboard="false">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="text-center my-4">
                <h2><b>Are you sure?</b></h2>
                <br>
                <p style="display: block;">Do You Want To Delete the Record ?</p>
              <div class="text-center my-4">
                <button class="btn-primary btn-sm text-white me-2"  data-bs-dismiss="modal">
                    <i class="fas fa-close text-white"></i> &nbsp;Close
                    </button>&nbsp;
                <!-- <button class="btn-danger btn-sm text-white me-4"  (click)="ondelete()"  data-bs-dismiss="modal" >          
                    <i class="fas fa-trash text-white fs-5 "></i> &nbsp;Delete
                </button> -->
               
        
              </div>
            </div>
            </div>
          </div>
        </div>
