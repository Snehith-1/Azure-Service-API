<div class="card shadow-sm">
  <div class="row ms-3 mt-3 d-flex align-items-center">
    <div class="col">
      <h3 class="card-title" style="font-size:15px;">Payment Summary</h3>
    </div>
    <div class="table-responsive">
      <div class="card card-body m-1 shadow-lg p-3 mb-5 bg-white rounded">
        <table id="payment_list" class="table table-striped table-row-bordered gy-5 gs-7">
          <thead>
            <tr class="fw-bolder fs-5 text-nowrap bg-lightblue text-blue align-middle">
              <th></th>
              <th style="font-size:11px;">S.No</th>
              <th style="font-size:11px;">Month</th>
              <th style="font-size:11px;">Year</th>
              <th style="font-size:11px;">Total Working Days</th>
              <th style="font-size:11px;">No.Of.Employees</th>
              <th style="font-size:11px;">No. Of Employees Paid</th>
              <th style="font-size:11px;">Total Salary</th>
              <th style="font-size:11px;">Salary Disposed</th>
              <th style="font-size:11px;">Outstanding Amount</th>
              <th style="font-size:11px;">Action</th>

            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let data of payment_list; let i=index;">
              <td (click)="ondetail(data.payment_month,data.payment_year)" (click)="data.isExpand = !data.isExpand">
                <i *ngIf="!data.isExpand" class="bi-chevron-right"></i>
                <i *ngIf="data.isExpand" class="bi-chevron-up"></i>
              </td>
              <td style="font-size:11px;">{{i+1}}</td>
              <td style="font-size:11px;">{{data.payment_month}}</td>
              <td style="font-size:11px;">{{data.payment_year}}</td>
              <td style="font-size:11px;">{{data.total_working_days}}</td>
              <td style="font-size:11px;">{{data.no_of_employee}}</td>
              <td style="font-size:11px;">{{data.paid_employee_count}}</td>
              <td style="font-size:11px;">{{data.total_salary}}</td>
              <td style="font-size:11px;">{{data.salary_disposed}}</td>
              <td style="font-size:11px;">{{data.outstanding_amount}}</td>
              <td class="text-center text-nowrap">
                <button title=" Payment" type="button" class="btn btn-icon btn-sm bg-success me-2"
                  (click)="makepayment(data.payment_month,data.payment_year)">
                  <span class="fa-solid fa-dollar-sign"></span>
                </button>

              </td>

              <br>
              <td *ngIf="data.isExpand">
                <br> <br> <br>
                <div class="table-responsive" style="margin-left:-1000px;">
                  <div class="card card-body m-3 shadow-lg p-3 mb-5 bg-white rounded">
                    <table class="table table-striped table-row-bordered gy-5 gs-7 ">
                      <thead>
                        <tr class="fw-bold fs-5 text-nowrap bg-lightblue text-blue">
                          <th></th>
                          <th>S.No</th>
                          <th>Payment Date</th>
                          <th>Paid Amount</th>
                          <th>No.Of.Employees Paid</th>
                          <th>Bank (Paid From) / Mode of Payment</th>
                          <th>Paid By</th>
                          <th class="text-center">Action</th>
                        </tr>
                      </thead>
                      <tbody>
                        <tr *ngFor="let data1 of paymentadd_list; let i=index;">
                          <td
                            (click)="ondetail1(data.payment_month,data.payment_year,data1.payment_date,data1.payment_type)"
                            (click)="data1.isExpand = !data1.isExpand">
                            <i *ngIf="!data1.isExpand" class="bi-chevron-right"></i>
                            <i *ngIf="data1.isExpand" class="bi-chevron-up"></i>
                          </td>
                          <td>{{i+1}}</td>
                          <td>{{data1.payment_date}}</td>
                          <td>{{data1.paid_amount}}</td>
                          <td>{{data1.no_of_employees}}</td>
                          <td>{{data1.modeof_payment}}</td>
                          <td>{{data1.paid_by}}</td>

                          <td class="text-center text-nowrap">
                            <button title="Edit" type="button" class="btn btn-icon btn-sm bg-success me-2"
                              data-bs-toggle="modal" data-bs-target="#myModaledit" (click)="openModalpaymentedit()">
                              <i class="fa-solid fa-pencil text-white  fs-6" aria-hidden="true"></i>
                            </button>

                            <button title="Delete" type="button" class="btn btn-icon btn-sm bg-danger me-2"
                              data-bs-toggle="modal" data-bs-target="#myModaldelete" (click)="openModalpaymentdelete()">
                              <i class="fa fa-trash fs-6" aria-hidden="true"></i>
                            </button>
                          </td>
                          <br>
                          <td *ngIf="data1.isExpand">
                            <br> <br> <br>
                            <div class="table-responsive" style="margin-left:-800px;">
                              <div class="card card-body m-3 shadow-lg p-3 mb-5 bg-white rounded">
                                <table class="table table-striped table-row-bordered gy-5 gs-7 ">
                                  <thead>
                                    <tr class="fw-bold fs-5 text-nowrap bg-lightblue text-blue">

                                      <th>Payment Date</th>
                                      <th>Employee Code</th>
                                      <th>Employee Name</th>
                                      <th>Branch</th>
                                      <th>Department</th>
                                      <th>Designation</th>
                                      <th>Payment Amount</th>
                                      <th>Paid Amount</th>
                                      <th>Payment Type</th>

                                    </tr>
                                  </thead>
                                  <tbody>
                                    <tr *ngFor="let data2 of paymentexpend_list; let i=index;">

                                      <td>{{data2.payment_date}}</td>
                                      <td>{{data2.user_code}}</td>
                                      <td>{{data2.employee_name}}</td>
                                      <td>{{data2.branch_name}}</td>
                                      <td>{{data2.department_name}}</td>
                                      <td>{{data2.designation_name}}</td>
                                      <td>{{data2.payment_amount}}</td>
                                      <td>{{data2.paid_amount}}</td>
                                      <td>{{data2.payment_type}}</td>

                                    </tr>
                                  </tbody>
                                </table>
                              </div>
                            </div>
                          </td>

                        </tr>
                      </tbody>
                    </table>
                  </div>
                </div>
              </td>


            </tr>
          </tbody>
        </table>

      </div>

    </div>

  </div>


</div>