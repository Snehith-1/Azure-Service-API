<div class="m-5">
    <div class="card card-body">
        <div class="card card-title bg-primary">
            <h3 class="m-4 text-white">Edit Enquiry</h3>
        </div>
        <form [formGroup]="cuseditform" #form="ngForm" >
            <div class="d-flex flex-row m-6 flex-wrap">
                <div class="col-12 col-lg-4 col-md-6 col-sm-12"><b>Enquiry Ref. No</b> 
                    <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row mt-2">
                        <input type="text" class="
                        form-control form-control-lg form-control-solid custom-input
                        mb-3 mb-lg-0  borderc-secondary bg-white custom-input"
                        formControlName="enquiry_gid" class="form-control" readonly />
                    </div>                    
                </div>
         
                <div class="col-12 col-lg-4 col-md-6 col-sm-12"><b>Enquiry Date</b> <span class="ms-1 text-red">*</span>
                    <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row mt-2">
                        <!-- <input type="date" class="
                        form-control form-control-lg form-control-solid custom-input
                        mb-3 mb-lg-0  borderc-secondary bg-white custom-input
                        " formControlName="enquiry_date" class="form-control" /> -->
                        <input type="text" class="
                                  form-control form-control-lg form-control-solid custom-input
                                   mb-3 mb-lg-0  borderc-secondary bg-white custom-input"
                                   formControlName="enquiry_date" class="form-control" />
                    </div>                    
                </div>
                <div class="col-12 col-lg-4 col-md-6 col-sm-12"><b>Branch </b>
                    <div class="col-lg-12 col-12 col-md-11 col-sm-11 fv-row mt-2">
                        <ng-select formControlName="branch_name" [(ngModel)]="mdlBranch"    [items]="branch_list" required class="custom col-lg-11 col-12 col-md-11 col-sm-11 fv-row mt-2"
                          bindLabel="branch_name" bindValue="branch_name" placeholder="Select an option"></ng-select>
                    </div>                    
                </div>
            </div>

                <div class="d-flex flex-row m-6 flex-wrap">
                    <div class="col-12 col-lg-4 col-md-6 col-sm-12"><b>Customer Enquiry Ref. No</b>
                        <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row mt-2">
                            <input type="text" class="
                            form-control form-control-lg form-control-solid custom-input
                            mb-3 mb-lg-0  borderc-secondary bg-white custom-input"
                            formControlName="enquiry_referencenumber" class="form-control"/>
                        </div>                    
                    </div>
                    

                    <div class="col-12 col-lg-4 col-md-6 col-sm-12"><b>Customer </b>
                        <div class="col-lg-12 col-12 col-md-11 col-sm-11 fv-row mt-2">
                            <ng-select formControlName="customer_name"    [items]="customer_list" required class="custom col-lg-11 col-12 col-md-11 col-sm-11 fv-row mt-2"
                              bindLabel="customer_name" bindValue="customer_name" placeholder="Select an option"
                              (change)="GetOnChangeCustomerName()"></ng-select>
                        </div>                    
                    </div>

                    <div class="col-12 col-lg-4 col-md-6 col-sm-12"><b>Contact Number</b>
                        <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row mt-2">
                            <input type="text" class="
                            form-control form-control-lg form-control-solid custom-input
                            mb-3 mb-lg-0  borderc-secondary bg-white custom-input"
                            formControlName="contact_number" class="form-control"/>
                        </div>                    
                    </div>
            </div>

            <div class="d-flex flex-row m-6 flex-wrap">
                <div class="col-12 col-lg-4 col-md-6 col-sm-12"><b>Contact Person</b><span class="ms-1 text-red">*</span>
                    <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row mt-2">
                        <input type="text" class="
                        form-control form-control-lg form-control-solid custom-input
                        mb-3 mb-lg-0  borderc-secondary bg-white custom-input"
                        formControlName="contact_person" class="form-control"/>
                    </div>                    
                </div>

                <div class="col-12 col-lg-4 col-md-6 col-sm-12"><b>Email ID</b>
                    <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row mt-2">
                        <input type="text" class="
                        form-control form-control-lg form-control-solid custom-input
                        mb-3 mb-lg-0  borderc-secondary bg-white custom-input"
                        formControlName="contact_email" class="form-control"/>
                    </div>                    
                </div>
                
                <div class="col-12 col-lg-4 col-md-6 col-sm-12"><b>Enquiry Assigned To </b>
                    <div class="col-lg-12 col-12 col-md-11 col-sm-11 fv-row mt-2">
                        <ng-select formControlName="assign_to" [items]="assign_list" required class="custom col-lg-11 col-12 col-md-11 col-sm-11 fv-row mt-2"
                          bindLabel="user_firstname" bindValue="user_firstname" placeholder="Select an option"></ng-select>
                    </div>                    
                </div>
            

                
        
            </div>

            <div class="d-flex flex-row m-6 flex-wrap">
                <div class="col-12 col-lg-4 col-md-6 col-sm-12"><b>Enquiry Remarks</b>
                    <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row mt-2">
                        <textarea type="text" class="
                        form-control form-control-lg form-control-solid custom-input
                        mb-3 mb-lg-0  borderc-secondary bg-white custom-input"
                        formControlName="enquiry_remarks" class="form-control"></textarea>
                    </div>                    
                </div>

                <div class="col-12 col-lg-4 col-md-6 col-sm-12"><b>Address</b>
                    <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row mt-2">
                        <textarea type="text" class="
                        form-control form-control-lg form-control-solid custom-input
                        mb-3 mb-lg-0  borderc-secondary bg-white custom-input"
                        formControlName="contact_address" class="form-control"></textarea>
                    </div>                    
                </div>

                <div class="col-12 col-lg-4 col-md-6 col-sm-12"><b>Customer Requirment</b>
                    <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row mt-2">
                        <textarea type="text" class="
                        form-control form-control-lg form-control-solid custom-input
                        mb-3 mb-lg-0  borderc-secondary bg-white custom-input"
                        formControlName="customer_requirement" class="form-control"></textarea>
                    </div>                    
                </div>
            </div>

            <div class="d-flex flex-row m-6 flex-wrap">
                <div class="col-12 col-lg-4 col-md-6 col-sm-12"><b>Landmark</b>
                    <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row mt-2">
                        <textarea type="text" class="
                        form-control form-control-lg form-control-solid custom-input
                        mb-3 mb-lg-0  borderc-secondary bg-white custom-input"
                        formControlName="landmark" class="form-control"></textarea>
                    </div>                    
                </div>

                <div class="col-12 col-lg-4 col-md-6 col-sm-12"><b>Expected Closure Date</b>
                    <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row mt-2">
                        <input type="text" class="
                        form-control form-control-lg form-control-solid custom-input
                        mb-3 mb-lg-0  borderc-secondary bg-white custom-input"
                        formControlName="closure_date" class="form-control" />
                    </div>                    
                </div>
            </div>

 <!--product summary-->
 <div class="table-responsive">
    <form [formGroup]="productform" (ngSubmit)="productSubmit()">

        <div class="card card-body table-responsive m-3 shadow-lg p-3 mb-5 bg-white rounded">
            <table id="products_list" class="table table-striped table-row-bordered gy-5 gs-7 ">
                <thead>
                    <tr class="fw-bold fs-5 text-nowrap bg-lightblue text-blue">
                        <th>Product Group</th>
                        <th>Product Code</th>
                        <th>Product</th>
                        <th>Unit</th>
                        <th>Qty Requested</th>
                        <th>Potential value</th>
                        <th>Need By Date</th>
                        <th class="align-center">Action</th>
                    </tr>
                </thead>
                <tbody>

                    <tr>
                        <!--Product Group Dropdown-->
                        <td>
                            <div class="col-lg-12 col-6 col-md-11 col-sm-11 fv-row mt-2">
                                <input type="text" class="form-control" formControlName="productgroup_name"
                                    readonly style="background-color: #e9e7e7">
                            </div>
                        </td>
                        <!--Customer Product Code-->
                        <!-- <td>
                            <div class="col-lg-12 col-12 col-md-11 col-sm-11 fv-row mt-2">
                                <input type="text" class="
form-control form-control-lg form-control-solid custom-input
mb-3 mb-lg-0  borderc-secondary bg-white custom-input" formControlName="customerproduct_code"
                                    class="form-control" />

                            </div>
                        </td> -->
                        <!--Product Code-->
                        <td>
                            <div class="col-lg-12 col-12 col-md-11 col-sm-11 fv-row mt-2">
                                <input type="text" class="form-control" formControlName="product_code"
                                    readonly style="background-color: #e9e7e7">
                            </div>
                        </td>
                        <!--Product Name-->
                        <td>
                            <div class="container">
                                <div class="row">
                                    <div class="col-lg-12 col-12 col-md-11 col-sm-11 fv-row mt-2">
                                        <ng-select formControlName="product_name" [items]="products_list1"
                                            required
                                            class="custom col-lg-11 col-12 col-md-11 col-sm-11 fv-row mt-2"
                                            bindLabel="product_name" placeholder="Select an option"
                                            (change)="GetOnChangeProductsName()"
                                            [(ngModel)]="mdlproduct"></ng-select>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-lg-12 col-12 col-md-11 col-sm-11 fv-row mt-2">
                                        <textarea type="text" class="
form-control form-control-lg form-control-solid custom-input
mb-3 mb-lg-0  borderc-secondary bg-white custom-input" formControlName="display_field"
                                            class="form-control"></textarea>
                                    </div>
                                </div>
                            </div>
                        </td>
                        <!--Unit-->
                        <td>
                            <div class="col-lg-12 col-12 col-md-11 col-sm-11 fv-row mt-2">
                                <input type="text" class="form-control" formControlName="productuom_name"
                                    readonly style="background-color: #e9e7e7;">
                            </div>
                        </td>
                        <!--Requested Quantity-->
                        <td>
                            <div class="col-lg-12 col-12 col-md-11 col-sm-11 fv-row mt-2">
                                <input type="text" class="
                                  form-control form-control-lg form-control-solid custom-input
                                   mb-3 mb-lg-0  borderc-secondary bg-white custom-input"
                                   formControlName="qty_requested" class="form-control" />
                            </div>
                        </td>
                        <!--Potential Value-->
                        <td>
                            <div class="col-lg-12 col-12 col-md-11 col-sm-11 fv-row mt-2">
                                <input type="text" class="
form-control form-control-lg form-control-solid custom-input
mb-3 mb-lg-0  borderc-secondary bg-white custom-input" formControlName="potential_value"
                                    class="form-control" />
                            </div>
                        </td>
                        <!--Need by Date-->
                        <td>
                            <div class="container">
                                <div class="row">
                                    <div class="col-lg-12 col-12 col-md-11 col-sm-11 fv-row mt-2">
                                        <input type="date" class="
form-control form-control-lg form-control-solid custom-input
mb-3 mb-lg-0  borderc-secondary bg-white custom-input" formControlName="product_requireddate"/>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-lg-12 col-12 col-md-11 col-sm-11 fv-row mt-2">
                                        <textarea type="text" class="
form-control form-control-lg form-control-solid custom-input
mb-3 mb-lg-0  borderc-secondary bg-white custom-input" formControlName="product_requireddateremarks"
                                            class="form-control"></textarea>
                                    </div>
                                </div>
                            </div>
                        </td>
                        <td class="text-center text-nowrap">
                            <button title="Add" type="button" class="btn btn-icon btn-sm bg-success me-2"
                                (click)="productSubmit()">
                                <span Class="fa-solid fa-plus text-white  fs-6"></span></button>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="modal" id="myModaldeletes" data-bs-backdrop="static" data-bs-keyboard="false">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="text-center my-4">
                        <h2><b>Are you sure?</b></h2>
                        <br>
                        <p style="display: block;">Do You Want To Delete the Record ?</p>
                        <div class="text-center my-4">
                            <button class="btn-primary btn-sm text-white me-2" data-bs-dismiss="modal">
                                <i class="fas fa-close text-white"></i> &nbsp;Close
                            </button>&nbsp;
                            <button class="btn-danger btn-sm text-white me-4" (click)="ondelete()"
                                data-bs-dismiss="modal">
                                <i class="fas fa-trash text-white fs-5 "></i> &nbsp;Delete
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </form>
</div>

 
 <div class="table-responsive">
    <div class="card card-body table-responsive m-3 shadow-lg p-3 mb-5 bg-white rounded">
      <table id="POproductlist" class="table table-striped table-row-bordered gy-5 gs-7 ">
        <thead>
          <tr class="fw-bold fs-5 text-nowrap bg-lightblue text-blue">
            <th>Product Group</th>
            <th>Product Code</th>
            <th>Product</th>
            <th>Unit</th>
            <th>Qty Requested</th>
            <th>Potential value</th>
            <th>Need By Date</th>
           
           
            <th class="text-center">Action</th>
          </tr>
        </thead>
        <tbody>
            <tr *ngFor="let data of POproductlist; ">
                <!--Product Group Dropdown-->
                <td>{{data.productgroup_name}}</td>
                <td>{{data.product_code}}</td>
                <td>{{data.product_name}}<br>{{data.display_field}}</td>
                <td>{{data.productuom_name}}</td>
                <td>{{data.qty_requested}}</td>
                <td>{{data.potential_value}}</td>
                <td>{{data.product_requireddate}}<br>{{data.product_requireddateremarks}}</td>
                <td>
                    <button title="Delete" type="button"
                    (click)="openModaldelete(data.enquiry_gid,data.tmpsalesenquiry_gid)" data-bs-toggle="modal"
                    data-bs-target="#myModaldeletes"
                    class="btn btn-icon btn-sm bg-danger me-1"><span
                        class="fa-solid fa-trash text-white  fs-6"></span></button>&nbsp;
                    <button title="Edit" type="button" (click)="openModaledit(data.tmpsalesenquiry_gid)"
                        data-bs-toggle="modal" data-bs-target="#myModaledits"
                        class="btn btn-icon btn-sm bg-warning me-1"><span
                            class="fa-solid fa-pencil text-white  fs-6"></span></button>

                </td>
            </tr>
        </tbody>
      </table>
    </div>
  </div>
        </form>
        <div class="text-center my-4">
            <button type="submit" class="btn-success btn-sm text-white me-2" (click)="onSubmit()" >
                <i class="bi bi-check-square fs-5"></i>
                <span class="ms-3" >Update</span> </button>
        
        <button class="btn-primary btn-sm text-white me-4" (click)="onclose()">
                    <i class="fas fa-arrow-left"></i> &nbsp; Back
                  </button>
                </div> 
    </div>
    </div>
    <div class="modal" id="myModaldelete" data-bs-backdrop="static" data-bs-keyboard="false">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="text-center my-4">
                <h2><b>Are you sure?</b></h2>
                <br>
                <p style="display: block;">Do You Want To Delete the Record ?</p>
              <div class="text-center my-4">
                <button class="btn-primary btn-sm text-white me-2"  data-bs-dismiss="modal">
                    <i class="fas fa-close text-white"></i> &nbsp;Close
                    </button>&nbsp;
                <!-- <button class="btn-danger btn-sm text-white me-4"  (click)="ondelete()"  data-bs-dismiss="modal" >          
                    <i class="fas fa-trash text-white fs-5 "></i> &nbsp;Delete
                </button> -->
               
        
              </div>
            </div>
            </div>
          </div>
        </div>
