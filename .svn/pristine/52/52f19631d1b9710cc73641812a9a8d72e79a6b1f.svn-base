<div class="card rounded-top">
  <div class="card-title p-5 pb-6 pt-6 rounded-top bg-primary">
    <h3 class="fw-bolder text-white"> &nbsp;&nbsp;&nbsp; Raise Order
    </h3>
  </div>
    <!-- <div class="card m-3">
      <div class="m-3 mt-5 border card"> -->
        
        <form [formGroup]="deliveryform" #form="ngForm">
          <div class="d-flex flex-row m-6 flex-wrap">
            <div class="col-12 col-lg-4 col-md-6  col-sm-12">
              <span class="font-bold">DO Ref No</span>
              <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row mt-2">
                <span style="color: brown"
                  ><strong readonly style="height:40px;">New Delivery Order</strong></span
                >
              </div>
            </div>

            <div class="col-12 col-lg-4 col-md-6 col-sm-12">
              <span class="font-bold required">DC Date</span> 
                    <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row mt-2">
                        <input type="date"   pattern="^(?!\s*$).+" [ngStyle]="{ 'border-color': deliveryform.get('salesorder_date')?.hasError('required') && deliveryform.get('salesorder_date')?.touched ? 'red' : 'rgb(209, 209, 209)' , 'height': '42px'}"
                        formControlName="salesorder_date" 
                   class="form-control form-control-lg form-control-solid date-picker 
                   custom-input mb-3 mb-lg-0 bg-white custom-input date-picker mt-2" 
                   placeholder="DD-MM-YYYY"/>
                    </div>                    
            </div>
            <div class="col-12 col-lg-4 col-md-6 col-sm-12">
              <span class="font-bold"> So Ref No</span>
              <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row mt-2">
                <input
                  class="form-control form-control-lg form-control-solid custom-input mb-3 mb-lg-0 borderc-secondary bg-white custom-input "
                  readonly
                  formControlName="so_referencenumber"
                  placeholder="Auto Populate"
                  style="height:40px;"
                />
              </div>
            </div>
            
          </div>
          <div class="d-flex flex-row m-6 flex-wrap">
            <div class="col-12 col-lg-4 col-md-6 col-sm-12">
              <span class="font-bold">Customer</span>
              <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row mt-2">
                <input
                  class="form-control form-control-lg form-control-solid custom-input mb-3 mb-lg-0 borderc-secondary bg-white custom-input"
                  readonly
                  formControlName="customer_name"
                  placeholder="Auto Populate"
                  style="height:40px;"
                />
              </div>
            </div>
            <div class="col-12 col-lg-4 col-md-6 col-sm-12">
              <span class="font-bold" >Customer Branch</span>

              <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row mt-2">
                <input
                  class="form-control form-control-lg form-control-solid custom-input mb-3 mb-lg-0 borderc-secondary bg-white custom-input"
                  readonly
                  formControlName="customer_branch"
                  placeholder="Auto Populate"
                  style="height:40px;"
                />
              </div>
            </div>

            <div class="col-12 col-lg-4 col-md-6 col-sm-12">
              <span class="font-bold">Contact Person</span>

              <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row mt-2">
                <input
                  class="form-control form-control-lg form-control-solid custom-input mb-3 mb-lg-0 borderc-secondary bg-white custom-input"
                  readonly
                  formControlName="customercontact_names"
                  placeholder="Auto Populate"
                  style="height:40px;"
                />
              </div>
            </div>
            
          </div>
          <div class="d-flex flex-row m-6 flex-wrap">
            <div class="col-12 col-lg-4 col-md-6 col-sm-12">
              <span class="font-bold">Contact Number</span>
              <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row mt-2">
                <input
                  class="form-control form-control-lg form-control-solid custom-input mb-3 mb-lg-0 borderc-secondary bg-white custom-input"
                  readonly
                  formControlName="customer_mobile"
                  placeholder="Auto Populate"
                  style="height:40px;"
                />
              </div>
            </div>
            <div class="col-12 col-lg-4 col-md-6 col-sm-12">
              <span class="font-bold">Email Address</span>
              <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row mt-2">
                <input
                  class
                  class="form-control form-control-lg form-control-solid custom-input mb-3 mb-lg-0 borderc-secondary bg-white custom-input"
                  readonly
                  formControlName="customer_email"
                  placeholder="Auto Populate"
                  style="height:40px;"
                />
              </div>
            </div>

            <div class="col-12 col-lg-4 col-md-6 col-sm-12"> <span class="font-bold">Customer Address</span>
              <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row mt-2">
                <textarea type="text" class="
                form-control form-control-lg form-control-solid custom-input
                mb-3 mb-lg-0  borderc-secondary bg-white custom-input" formControlName="customer_address"
                           readonly   placeholder="Auto Populate" class="form-control"></textarea>
              </div>
            </div>
            
          </div>
          <div class="d-flex flex-row m-6 flex-wrap">
            <div class="col-12 col-lg-4 col-md-6 col-sm-12">
              <span class="font-bold">DO No</span>
              <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row mt-2">
                <input
                  type="text"
                  formControlName="dc_no"
                  class="form-control form-control-lg form-control-solid custom-input mb-3 mb-lg-0 bg-white custom-input borderc-secondary"
                  placeholder="Dc No"
                  required
                  style="height:40px;"
                />
              </div>
            </div>
            <div class="col-12 col-lg-4 col-md-6 col-sm-12">
              <span class="font-bold">Shipping To</span>
              <div class="col-lg-12 col-12 col-md-11 col-sm-11 fv-row mt-2">
                <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row mt-2">
                  <textarea
                    class="form-control form-control-lg form-control-solid custom-input mb-3 mb-lg-0 borderc-secondary bg-white custom-input"
                    readonly
                    formControlName="customer_address_so"
                    placeholder="Auto Populate"
                  ></textarea>
                </div>
              </div>
            </div>  
            
            <div class="col-12 col-lg-4 col-md-6 col-sm-12">
              <span class="font-bold">Mode Of Despatch</span>
              <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row mt-2">
                <input
                  type="text"
                  formControlName="customer_mode"
                  class="form-control form-control-lg form-control-solid custom-input mb-3 mb-lg-0 bg-white custom-input borderc-secondary"
                  placeholder="Mode"
                  required
                />
              </div>
            </div>
            
          </div>
          <div class="d-flex flex-row m-6 flex-wrap">
            

            <div class="col-12 col-lg-4 col-md-6 col-sm-12">
              <span class="font-bold">Tracker ID</span>
              <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row mt-2">
                <input
                  type="text"
                  formControlName="customer_city"
                  class="form-control form-control-lg form-control-solid custom-input mb-3 mb-lg-0 bg-white custom-input borderc-secondary"
                  placeholder="Tracker ID"
                  required
                />
              </div>
            </div>
          </div>

          <div class="table-responsive">
            <div
              class="card card-body m-0 p-3 mb-5 bg-white rounded table-responsive"
            >
              <table
                id="raisedeliveryorder_list"
                class="table table-striped table-row-bordered gy-4 gs-2"
              >
                <thead class="table_head">
                  <tr
                    class="text-white fw-bold fs-5 text-nowrap bg-lightblue text-blue"
                  >
                    <th>S.No</th>
                    <th>Product Group</th>
                    <th>Customer Product Code</th>
                    <th>Product & Description</th>
                    <th>Units</th>
                    <th>Quantity Ordered</th>
                    <th>Quantity Available</th>
                    <th>Quantity Delivered</th>
                    <th>Despatch Quantity</th>
                    <th>Remarks</th>
                    <th>Need by Date</th>
                    <th class="text-center">Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr
                    *ngFor="let data of raisedeliveryorder_list; let i = index"
                  >
                    <td>{{ i + 1 }}</td>
                    <td>{{ data.productgroup_name }}</td>
                    <td>{{ data.customerproduct_code }}</td>
                    <td>
                      <tr>
                        <td>{{ data.product_code }}</td>
                      </tr>
                      <tr>
                        <td>{{ data.product_name }}</td>
                      </tr>
                      <tr>
                        <td>{{ data.display_field }}</td>
                      </tr>
                    </td>

                    <td>{{ data.uom_name }}</td>
                    <td style="text-align: right">{{ data.qty_quoted }}</td>
                    <td style="text-align: right">
                      {{ data.available_quantity }}
                    </td>
                    <td style="text-align: center">
                      {{ data.product_delivered }}
                    </td>
                    <td style="text-align: center">
                      <textarea
                        class="form-control form-control-lg form-control-solid custom-input mb-3 mb-lg-0 borderc-secondary bg-white custom-input"
                        readonly
                        formControlName="product_delivered"
                      ></textarea>
                    </td>

                    <td>
                      <textarea
                        class="form-control form-control-lg form-control-solid custom-input mb-3 mb-lg-0 borderc-secondary bg-white custom-input"
                        formControlName="reamark"
                      ></textarea>
                    </td>
                    <td>{{ data.product_requireddate }}</td>
                    <td class="text-center text-nowrap">
                      <button
                        type="button"
                        class="btn-primary btn-sm text-white me-4 float-end"
                        data-bs-toggle="modal"
                        data-bs-target="#myModaladd"
                        (click)="onadd(data.salesorder_gid, data.product_gid)"
                      >
                        Select
                      </button>
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>

          <div class="card-header bg-lightblue card-height55">
            <div class="card-title col-12 m-0">
              <h5 class="fw-bolder text-blue">Terms and Conditions</h5>
            </div>
          </div>
          <div class="d-flex flex-row m-2  col-lg-12 table-responsive">
            <div class="col-12 col-lg-12 col-md-10  col-sm-10 fv-row mt-2">
              <angular-editor
                [config]="config"
                formControlName="template_content"
              ></angular-editor>
            </div>
          </div>
        </form>
      </div>

      <!-- begin::Submit button -->
      <div class="text-center my-4">
        <button
          class="btn-success btn-sm text-white me-4"
          (click)="onSubmitDO()"
        >
          <i class="fas fa-arrow-left"></i> &nbsp; Submit
        </button>
        <button
          class="btn-primary btn-sm text-white me-4"
          routerLink="/ims/ImsTrnAddDeliveryorder"
        >
          <i class="fas fa-arrow-left"></i> &nbsp; Back
        </button>
      </div>
      <!-- end::Submit button -->

      <div
        class="modal"
        id="myModaladd"
        data-bs-backdrop="static"
        data-bs-keyboard="false"
      >
        <div class="modal-dialog" style="align-items: center; padding: 0 0 4px">
          <div class="modal-content" style="width: 700px">
            <div class="card-header p-1 pb-2 pt-1 rounded-top bg-primary">
              <h2 style="margin-top: 10px; color: white; font-weight: bold">
                &nbsp;&nbsp;<i class=""></i> Select Issue Quantity
              </h2>
            </div>
            <div>
              <!--product summary-->
              <div class="table-responsive">
                <div
                  class="card card-body table-responsive m-3 bg-white rounded"
                >
                  <table
                    id="products_list"
                    class="table table-striped table-row-bordered gy-5 gs-7"
                  >
                    <thead>
                      <tr
                        class="fw-bold fs-5 text-nowrap bg-lightblue text-blue"
                      >
                        <th>Product Name</th>
                        <th>Product Unit</th>
                        <th>Product Description</th>
                        <th>Outsatanding Qty</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr
                        *ngFor="let data of OutstandingQty_list; let i = index"
                      >
                        <td>
                          <div
                            class="col-lg-12 col-12 col-md-11 col-sm-11 fv-row mt-2"
                          >
                            {{ data.product_name }}
                            <!-- <input type="text" class="
form-control form-control-lg form-control-solid custom-input
mb-3 mb-lg-0  borderc-secondary bg-white custom-input" readonly formControlName="customerproduct_code"
                                                            class="form-control" /> -->
                          </div>
                          
                        </td>

                        <td>
                          <div
                            class="col-lg-12 col-12 col-md-11 col-sm-11 fv-row mt-2"
                          >
                            {{ data.uom_name }}
                            <!-- <input type="text" class="
                              form-control form-control-lg form-control-solid custom-input
                              mb-3 mb-lg-0  borderc-secondary bg-white custom-input" readonly
                                                            formControlName="qty_requested" class="form-control" /> -->
                          </div>
                        </td>

                        <td>
                          <div
                            class="col-lg-12 col-12 col-md-11 col-sm-11 fv-row mt-2"
                          >
                            {{ data.display_field }}
                            <!-- <textarea type="text" class="
                              form-control form-control-lg form-control-solid custom-input
                              mb-3 mb-lg-0  borderc-secondary bg-white custom-input" readonly
                                                            formControlName="display_field"
                                                            class="form-control"></textarea> -->
                          </div>
                          
                        </td>

                        <td>
                          <div
                            class="col-lg-12 col-12 col-md-11 col-sm-11 fv-row mt-2"
                          >
                            {{ data.outstanding_qty }}
                            <!-- <input type="text" class="
form-control form-control-lg form-control-solid custom-input
mb-3 mb-lg-0  borderc-secondary bg-white custom-input" readonly formControlName="qty_requested" class="form-control" /> -->
                          </div>
                        </td>
                      </tr>
                    </tbody>
                  </table>
                </div>
                <form [formGroup]="deliveryform1" (ngSubmit)="OnSubmit()" >
                  <div class="table-responsive">
                    <div
                      class="card card-body table-responsive m-3 bg-white rounded"
                    >
                      <table
                        id="IssuedQty_list"
                        class="table table-striped table-row-bordered gy-5 gs-7"
                      >
                        <thead>
                          <tr
                            class="fw-bold fs-5 text-nowrap bg-lightblue text-blue"
                          >
                            <th>Stock Date</th>
                            <th>Stock Ref No</th>
                            <th>Description</th>
                            <th>GRN REf No</th>
                            <th>Stock In Hand</th>
                            <th>Quantity Issued</th>
                          </tr>
                        </thead>
                        <tbody>
                          <tr
                            *ngFor="let data of IssuedQty_list; let i = index"
                          >
                            <td>
                              <div
                                class="col-lg-12 col-6 col-md-11 col-sm-11 fv-row mt-2"
                              >
                                {{ data.created_date }}
                                <!-- <input type="text" class="
form-control form-control-lg form-control-solid custom-input
mb-3 mb-lg-0  borderc-secondary bg-white custom-input" readonly formControlName="customerproduct_code"
                                                                class="form-control" /> -->
                              </div>
                            </td>

                            <td>
                              <div
                                class="col-lg-12 col-12 col-md-11 col-sm-11 fv-row mt-2"
                              >
                                {{ data.reference_gid }}
                                <!-- <input type="text" class="
form-control form-control-lg form-control-solid custom-input
mb-3 mb-lg-0  borderc-secondary bg-white custom-input" readonly formControlName="customerproduct_code"
                                                                class="form-control" /> -->
                              </div>
                            </td>

                            <td>
                              <div
                                class="col-lg-12 col-12 col-md-11 col-sm-11 fv-row mt-2"
                              >
                                {{ data.display }}
                                <!-- <textarea type="text" class="
                          form-control form-control-lg form-control-solid custom-input
                          mb-3 mb-lg-0  borderc-secondary bg-white custom-input" readonly
                                                                formControlName="display_field"
                                                                class="form-control"></textarea> -->
                              </div>
                            </td>

                            <td>
                              <div
                                class="col-lg-12 col-12 col-md-11 col-sm-11 fv-row mt-2"
                              >
                                {{ data.stock_gid }}
                                <!-- <input type="text" class="
                          form-control form-control-lg form-control-solid custom-input
                          mb-3 mb-lg-0  borderc-secondary bg-white custom-input" readonly
                                                                formControlName="qty_requested" class="form-control" /> -->
                              </div>
                            </td>

                            <td>
                              <div
                                class="col-lg-12 col-12 col-md-11 col-sm-11 fv-row mt-2"
                              >
                                {{ data.stock_qty }}
                                <!-- <input type="text" class="
form-control form-control-lg form-control-solid custom-input
mb-3 mb-lg-0  borderc-secondary bg-white custom-input" readonly formControlName="qty_requested" class="form-control" /> -->
                              </div>
                            </td>
                            <td>
                              <div
                                class="col-lg-12 col-12 col-md-11 col-sm-11 fv-row mt-2"
                              >
                                <input
                                  type="text"
                                  style="text-align: right"
                                  class="form-control form-control-lg form-control-solid custom-input mb-3 mb-lg-0 borderc-secondary bg-white custom-input"
                                  placeholder="0.00"
                                  formControlName="total_amount"
                                  class="form-control"
                                />
                              </div>
                              <br />
                              <div class="col-lg-12 col-md-6 col-sm-6">
                                <b>Total Amount &nbsp;</b>
                                <div
                                  class="col-lg-12 col-12 col-md-11 col-sm-11 fv-row mt-2"
                                >
                                  <input
                                    type="text"
                                    formControlName="producttotalamount"
                                    class="form-control"
                                    readonly
                                    style="
                                      background-color: #e9e7e7;
                                      text-align: right;
                                    "
                                  />
                                </div>
                              </div>
                              <br />
                            </td>
                          </tr>
                        </tbody>
                      </table>

                      <div class="text-center my-4">
                        <button
                          type="submit"
                          class="btn-success btn-sm text-white me-2">
                          <i class="bi bi-check-square fs-5"></i>
                          <span class="ms-3">Submit</span>
                        </button>
                        <button
                          class="btn-primary btn-sm text-white me-4"
                          routerLink="/ims/ImsTrnRaiseDeliveryorder"
                        >
                          <i class="ki-duotone ki-entrance-right fs-5">
                             </i
                          >&nbsp;Back
                        </button>
                      </div>
                    </div>
                  </div>
                </form>
              <!-- </div>
            </div> -->
          </div>
        </div>
      </div>
    </div>
  
</div>
