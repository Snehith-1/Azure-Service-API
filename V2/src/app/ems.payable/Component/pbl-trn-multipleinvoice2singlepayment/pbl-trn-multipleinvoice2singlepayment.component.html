<div class="card">

    <div class="card m-3 border">
      <div class="card-header bg-lightblue card-height55">
        <div class="card-title m-0">
          <h4 class="fw-bolder text-blue">Add Payment</h4>
        </div>
      </div>
    </div>
  <div class="card m-3">
    <form [formGroup]="reactiveForm" #form="ngForm">
      <div *ngFor="let data of vendor_lists;">
        <div class="d-flex flex-row flex-wrap mt-6 ms-4">

          <div class="col-12 col-lg-4 col-md-6 col-sm-12"><span class="font-bold required">Payment Date</span>
            <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row mt-2">
                <input type="date" formControlName="payment_date" class="form-control form-control-lg
                 form-control-solid date-picker custom-input mb-3 mb-lg-0 bg-white custom-input mb-3 mb-lg-0"
                  placeholder="DD-MM-YYYY" name="payment_date"/>
                    
            </div>
        </div>

          <!-- <div class="col-12 col-lg-4 col-md-4 col-sm-12"><span class="font-bold">Payment Date</span>
            <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row mt-2">
                <input type="date"
                    class="form-control form-control-lg form-control-solid date-picker mb-3 mb-lg-0
                     borderc-secondary bg-white custom-input"
                    placeholder="DD-MM-YYYY" formControlName="payment_date" />
            </div>
        </div> -->

          <div class="col-12 col-lg-4 col-md-4 col-sm-12"><span class="font-bold">Payment Remarks</span>
            <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row mt-2">
              <textarea  row="3" class="form-control form-control-lg form-control-solid border-secondary custom-input mb-3 mb-lg-0 bg-white custom-input mt-3" id="payment_remarks" formControlName="payment_remarks" rows="1" placeholder="Enter Remarks"></textarea>
            </div>
          </div>

          <div class="col-12 col-lg-4 col-md-4 col-sm-12"><span class="font-bold">Payment Note</span>
            <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row mt-2">
              <textarea row="3" class="form-control form-control-lg form-control-solid border-secondary custom-input mb-3 mb-lg-0 bg-white custom-input mt-3" id="payment_note" formControlName="payment_note" rows="1" placeholder="Enter Note"></textarea>
            </div>
          </div>

        </div>
        <div class="d-flex flex-row flex-wrap mt-6 ms-4">
          <div class="col-12 col-lg-4 col-md-4 col-sm-12"><span class="font-bold">Vendor Name</span>
            <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row mt-4">
              <p class="fs-5">{{data.vendor_companyname}}</p>
            </div>
          </div>
  
          <div class="col-12 col-lg-4 col-md-4 col-sm-12"><span class="font-bold">Vendor Contact Details</span>
            <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row mt-4">
              <p class="fs-5">{{data.vendorcontactdetails}}</p>
            </div>
          </div>
  
          <div class="col-12 col-lg-4 col-md-4 col-sm-12"><span class="font-bold">Contact Number</span>
            <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row mt-4">
              <p class="fs-5">{{data.contact_telephonenumber}}</p>
            </div>
          </div>

        </div>
        <div class="d-flex flex-row flex-wrap mt-6 ms-4">

          <div class="col-12 col-lg-4 col-md-4 col-sm-12"><span class="font-bold">Email</span>
            <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row mt-4">
              <p class="fs-5">{{data.email_id}}</p>
            </div>
          </div>
  
          <div class="col-12 col-lg-4 col-md-4 col-sm-12"><span class="font-bold">Vendor Address</span>
            <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row mt-4">
              <p class="fs-5">{{data.vendoraddress}}</p>
            </div>
          </div>
          <div class="col-12 col-lg-4 col-md-4 col-sm-12"><span class="font-bold">Currency</span>
            <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row mt-4">
              <p class="fs-5">{{data.currency_code}}</p>
            </div>
          </div>
        </div>

        <div class="d-flex flex-row flex-wrap mt-6 ms-3">
          
          <div class="col-12 col-lg-4 col-md-4 col-sm-12"><span class="font-bold">Exchange Rate</span>
            <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row mt-4">
              <p class="fs-5">{{data.exchange_rate}}</p>
            </div>
          </div>
          <div class="col-12 col-lg-4 col-md-4 col-sm-12"><span class="font-bold">Entered By</span>
            <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row mt-4">
              <p class="fs-5">{{data.name}}</p>
            </div>
          </div>

          <div class="col-12 col-lg-4 col-md-4 col-sm-12"><span class="font-bold">Priority</span>
            <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row mt-8">
              <input type="radio" class="form-control-input" formControlName="priority" value="N" (change)="showTextBox2($event)"><label class="fs-5 ms-3" for="Low">Low</label>
              <input type="radio" class="form-control-input ms-6" formControlName="priority" value="Y" (change)="showTextBox2($event)"><label class="fs-5 ms-3" for="Low">High</label>
            </div>
          </div>
         

          
        </div>
        <div class="d-flex flex-row flex-wrap mt-6 ms-3">
          <div class="col-12 col-lg-4 col-md-4 col-sm-12" *ngIf="showInput1">
            <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row mt-8">
              <textarea class="form-control form-control-lg form-control-solid border-secondary custom-input mb-3 mb-lg-0 bg-white custom-input" rows="1" formControlName="textbox" name="textbox" placeholder="Enter Text"></textarea>
            </div>
          </div>
        </div>
        </div>

       
      <div class="table-responsive">
        <div class=" mt-12 bg-white rounded">
          <table id="singlepayment_list" class="table table-striped table-row-bordered">
            <thead>
              <tr class="fw-bolder fs-7 bg-lightblue text-blue align-bottom">
                <th>
                  <input type="checkbox" id="checkAll" class="mt-2" (change)="$event ? masterToggle() : null" 
                  [checked]="selection.hasValue() && isAllSelected()" 
                  [indeterminate]="selection.hasValue() && !isAllSelected()">
                </th>
                <th>S.No</th>
                <th>Invoice Date</th>
                <th>Invoice Refno</th>
                <th style="text-align: right;">Invoice Amount</th>
                <th style="text-align: right;">Paid Amount</th>
                <th style="text-align: right;">Outstanding Amount</th>
                <th>Invoice Status</th>
                <th style="text-align: right; width: 100px; ">Advance</th>
                <th style="text-align: right; width: 100px;">Payment Amount</th>
                <!-- <th style="text-align: right; width: 70px;">Balance PO Advance</th>
                <th style="text-align: right; width: 70px;">Total PO Advance</th> -->
                <!-- <th style="text-align: right; width: 70px;">Grand Total</th> -->
                <th style="text-align: right; width: 100px;">TDS Amount</th>
                <!-- <th style="text-align: right; width: 70px;">Final Amount</th> -->
                <th style="width: 100px;">Remarks</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let data of singlepayment_list; let i=index;" class="align-middle fs-8">
                <td>
                  <input type="checkbox" (click)="$event.stopPropagation()" (change)="$event ? selection.toggle(data) : null" [checked]="selection.isSelected(data)" />
                </td>
                <td>{{i+1}}</td>
                <td>{{data.invoice_date}}</td>
                <td>{{data.invoice_gid}}</td>
                <td style="text-align: right;">{{data.invoice_amount}}</td>
                <td style="text-align: right;">{{data.payed_amount}}</td>
                <td style="text-align: right;">{{data.outstanding}}</td>
                <td >{{data.invoice_status}}</td>
                <td style="text-align: right;">
                  <input type="text" [(ngModel)]="data.advance" style=" text-align: right;" 
                  class="form-control form-control-lg form-control-solid custom-input mb-3 mb-lg-0 bg-white 
                  custom-input borderc-secondary"
                  formControlName="advance_{{i}}" (keypress)="onKeyPress($event)"  readonly/>
                </td>
                <td style="text-align: right;">
                  <input type="text" [(ngModel)]="data.payment_amount" style=" text-align: right;"
                  class="form-control form-control-lg form-control-solid custom-input mb-3 mb-lg-0 bg-white 
                  custom-input borderc-secondary"
                  formControlName="payment_amount_{{i}}" (keypress)="onKeyPress($event)" />
                </td>
                <!-- <td style="text-align: right;">
                  <input type="text" [(ngModel)]="data.balancepo_advance" style=" text-align: right;"
                  class="form-control form-control-lg form-control-solid custom-input mb-3 mb-lg-0 bg-white 
                  custom-input borderc-secondary"
                  formControlName="balancepo_advance_{{i}}" (keypress)="onKeyPress($event)" />
                </td>
                <td style="text-align: right;">
                  <input type="text" [(ngModel)]="data.totalpo_advance" style=" text-align: right;"
                  class="form-control form-control-lg form-control-solid custom-input mb-3 mb-lg-0 bg-white 
                  custom-input borderc-secondary"
                  formControlName="totalpo_advance_{{i}}" (keypress)="onKeyPress($event)" />
                </td> -->
                <!-- <td style="text-align: right;">
                  <input type="text" [(ngModel)]="data.grand_total" style=" text-align: right;"
                  class="form-control form-control-lg form-control-solid custom-input mb-3 mb-lg-0 bg-white 
                  custom-input borderc-secondary" formControlName="grand_total_{{i}}" (keypress)="onKeyPress($event)" />
                </td> -->
                <td style="text-align: right;">
                  <input type="text" [(ngModel)]="data.tds_amount" style=" text-align: right;" 
                  class="form-control form-control-lg form-control-solid custom-input mb-3 mb-lg-0 bg-white 
                  custom-input borderc-secondary"
                  formControlName="tds_amount_{{i}}" (keypress)="onKeyPress($event)" />
                </td>
                <!-- <td style="text-align: right;">
                  <input type="text" [(ngModel)]="data.final_amount" style=" text-align: right;" 
                  class="form-control form-control-lg form-control-solid custom-input mb-3 mb-lg-0 bg-white 
                  custom-input borderc-secondary"
                  formControlName="payment_amount_{{i}}" (keypress)="onKeyPress($event)" />
                </td> -->
                <td>
                  <textarea id="remark" row="3"   class="form-control form-control-lg form-control-solid
                  border-secondary custom-input mb-3 mb-lg-0 bg-white custom-input mt-3" 
                  id="payment_remarks"
                   formControlName="remark_{{i}}" rows="1"></textarea>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>

      <div class="d-flex flex-row fv-row flex-wrap">
        <div class="col-12 col-lg-4 col-md-4 col-sm-12">
          <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row "><span class="font-bold required">Payment Mode</span>

            <!-- <ng-select formControlName="payment_mode" 
            style="width: 70%;" 
            [(ngModel)]="payment_mode" (change)="showTextBox($event)" placeholder="Select Payment Mode" >
              <ng-option bindvalue="Cash">Cash</ng-option>
              <ng-option value="Cheque">Cheque</ng-option>
              <ng-option value="DD">DD</ng-option>
              <ng-option value="Credit Card">Credit Card</ng-option>
              <ng-option value="NEFT">NEFT</ng-option>
            
            </ng-select> -->

            <select formControlName="payment_mode" class="form-select form-select-solid bg-white
             form-select-lg border-secondary custom-input select2" 
             (change)="showTextBox($event)">
              <option value="">--Select an option--</option>
              <option value="Cash">Cash</option>
              <option value="Cheque">Cheque</option>
              <option value="DD">DD</option>
              <option value="Credit Card">Credit Card</option>
              <option value="NEFT">NEFT</option>
            </select>

          </div>
        </div>        
      </div>

      <div  *ngIf="showInput">
        <div class="d-flex flex-row m-6 flex-wrap mt-5">

        <div class="col-12 col-lg-4 col-md-4 col-sm-12"><span class="font-bold">Bank Name</span>          
            <ng-select formControlName="bank_name" [class.is-invalid]="bank_name.invalid &&
             (bank_name.dirty || bank_name.touched)" 
             [ngClass]="{'invalid-border': bank_name.invalid && bank_name.touched}"
              [items]="bankdetailslist" class="custom col-lg-11 col-12 col-md-11 col-sm-11
               fv-row mt-3" bindLabel="bank_name" bindValue="bank_name"
                placeholder="Select Bank Name" [(ngModel)]="bank_name1"></ng-select>
        </div>
      

        <div class="col-12 col-lg-4 col-md-4 col-sm-12">
          <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row"><span class="font-bold">Cheque No</span>
            <input formControlName="cheque_no" type="text" class="form-control form-control-lg form-control-solid border-secondary custom-input mb-3 mb-lg-0 bg-white custom-input mt-3" placeholder="Enter Cheque No" name="cheque_no" />
          </div>
        </div>

        <div class="col-12 col-lg-4 col-md-4 col-sm-12">
          <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row"><span class="font-bold">Branch Name</span>
            <input formControlName="branch_name" type="text" [(ngModel)]="branchche" class="form-control form-control-lg form-control-solid border-secondary custom-input mb-3 mb-lg-0 bg-white custom-input mt-3" placeholder="Enter Branch Name" name="branch_name" />
          </div>
        </div>
      </div>

        
        <div class="d-flex flex-row m-6 flex-wrap mt-4">
          <div class="col-12 col-lg-4 col-md-4 col-sm-12">
            <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row mt-5"><span class="font-bold">Date</span>
              <input formControlName="payment_date" type="date" class="form-control form-control-lg form-control-solid border-secondary custom-input mb-3 mb-lg-0 bg-white custom-input mt-3" name="payment_date" />
            </div>
          </div>
        </div>
      </div>     

      <div *ngIf="showInput2">
        <div class="d-flex flex-row m-6 flex-wrap mt-5">
        <div class="col-12 col-lg-4 col-md-4 col-sm-12"><span class="font-bold">Bank Name</span>          
          <ng-select formControlName="bank_name" [class.is-invalid]="bank_name.invalid && (bank_name.dirty || bank_name.touched)" [ngClass]="{'invalid-border': bank_name.invalid && bank_name.touched}" [items]="bankdetailslist" class="custom col-lg-11 col-12 col-md-11 col-sm-11 fv-row mt-3" bindLabel="bank_name" bindValue="bank_name" placeholder="Select Bank Name"></ng-select>
        </div>

        <div class="col-12 col-lg-4 col-md-4 col-sm-12">
          <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row"><span class="font-bold">DD No.</span>
            <input formControlName="dd_no" type="text" class="form-control form-control-lg form-control-solid border-secondary custom-input mb-3 mb-lg-0 bg-white custom-input mt-3" placeholder="Enter DD No." name="dd_no" />
          </div>
        </div>

        <div class="col-12 col-lg-4 col-md-4 col-sm-12">
          <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row "><span class="font-bold">Branch Name</span>
            <input formControlName="branch_name" type="text" [(ngModel)]="branch_namedd"
             class="form-control form-control-lg form-control-solid border-secondary custom-input mb-3 mb-lg-0 bg-white custom-input mt-3" placeholder="Enter Branch Name" name="branch_name" />
          </div>
        </div>

        </div>

        <div class="d-flex flex-row m-6 flex-wrap mt-5">
          <div class="col-12 col-lg-4 col-md-4 col-sm-12">
            <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row "><span class="font-bold">Date</span>
              <input formControlName="payment_date" type="date" class="form-control form-control-lg form-control-solid  borderc-secondary custom-input mb-3 mb-lg-0 bg-white custom-input mt-3" name="payment_date" />
            </div>
          </div>
        </div>
       
      </div>

      <div class="d-flex flex-row m-6 flex-wrap mt-5" *ngIf="showInput3">
        <div class="col-12 col-lg-4 col-md-4 col-sm-12">
          <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row "><span class="font-bold">Card Name</span>
            <ng-select formControlName="card_name" [(ngModel)]="cardname" [class.is-invalid]="card_name.invalid && (card_name.dirty || card_name.touched)" [ngClass]="{'invalid-border': card_name.invalid && card_name.touched}" [items]="carddetailslist" class="custom col-lg-11 col-12 col-md-11 col-sm-11 fv-row mt-3" bindLabel="bank_name" bindValue="bank_name" placeholder="Select Card Name"></ng-select>
          </div>
        </div>

        <div class="col-12 col-lg-4 col-md-4 col-sm-12">
          <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row "><span class="font-bold">Transaction No.</span>
            <input formControlName="transaction_no" type="text" class="form-control form-control-lg form-control-solid border-secondary custom-input mb-3 mb-lg-0 bg-white custom-input mt-3" placeholder="Enter Transaction No." name="transaction_no" />
          </div>
        </div>
      </div>

      <div  *ngIf="showInput4">
        <div class="d-flex flex-row fv-row flex-wrap mt-5">
        <div class="col-12 col-lg-4 col-md-4 col-sm-12"><span class="font-bold">Bank Name</span>          
          <ng-select formControlName="bank_name" [(ngModel)]="branchnameneft" [class.is-invalid]="bank_name.invalid && (bank_name.dirty || bank_name.touched)" [ngClass]="{'invalid-border': bank_name.invalid && bank_name.touched}" [items]="bankdetailslist" class="custom col-lg-11 col-12 col-md-11 col-sm-11 fv-row mt-3" bindLabel="bank_name" bindValue="bank_name" placeholder="Select Bank Name"></ng-select>
        </div>

        <div class="col-12 col-lg-4 col-md-4 col-sm-12">
          <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row"><span class="font-bold">Transaction Ref. No.</span>
            <input formControlName="cheque_no" type="text" class="form-control form-control-lg form-control-solid border-secondary custom-input mb-3 mb-lg-0 bg-white custom-input mt-3" placeholder="Enter Cheque No" name="cheque_no" />
          </div>
        </div>

        <div class="col-12 col-lg-4 col-md-4 col-sm-12">
          <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row "><span class="font-bold">Branch Name</span>
            <input formControlName="branch_name" type="text" class="form-control form-control-lg 
            form-control-solid border-secondary custom-input mb-3 mb-lg-0 bg-white custom-input 
            " placeholder="Enter Branch Name" name="branch_name" />
          </div>
        </div>
        </div>
        <div class="d-flex flex-row fv-row flex-wrap mt-5">
          <div class="col-12 col-lg-4 col-md-4 col-sm-12">
            <div class="col-lg-11 col-12 col-md-11 col-sm-11 fv-row "><span class="font-bold">Date</span>
              <input formControlName="payment_date" type="date" class="form-control form-control-lg form-control-solid  borderc-secondary custom-input mb-3 mb-lg-0 bg-white custom-input mt-3" name="payment_date" />
            </div>
          </div>
        </div>
       

      </div>

      <div  *ngIf="showInput5">
        <div class="d-flex flex-row fv-row flex-wrap mt-5">
          <div class="col-lg-14 col-4 col-md-4 col-sm-12"><span class="font-bold">Date</span>
          <input formControlName="payment_date" type="date" class="form-control form-control-lg form-control-solid border-secondary custom-input mb-3 mb-lg-0 bg-white custom-input mt-3"/>
        </div>
      </div>
        
      </div>

      <div class="text-center my-4 mt-10">
        <button class="btn-success btn-sm text-white me-4" (click)="onsubmit()">
          <i class="fas fa-check fs-5"></i> &nbsp;Submit
        </button> &nbsp;&nbsp;
        <button class="btn-danger btn-sm text-white me-4" (click)="onback()">
          <i class="fas fa-arrow-left fs-5"></i>
          <span class="ms-3">Back</span>
        </button>
      </div>
    </form>
  </div>
</div>